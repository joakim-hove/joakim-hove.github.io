

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The data types available in ERT &#8212; ERT 2.3 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running simulations - the Forward Model" href="../forward_model/index.html" />
    <link rel="prev" title="Introduction to ERT and Ensemble based methods" href="../introduction/index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../forward_model/index.html" title="Running simulations - the Forward Model"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../introduction/index.html" title="Introduction to ERT and Ensemble based methods"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../manual.html">ERT 2.3 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../manual.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The data types available in ERT</a><ul>
<li><a class="reference internal" href="#parameters">Parameters</a><ul>
<li><a class="reference internal" href="#scalar-parameters-with-a-template-gen-kw">Scalar parameters with a template: GEN_KW</a></li>
<li><a class="reference internal" href="#d-field-parameters-field">3D field parameters: FIELD</a></li>
<li><a class="reference internal" href="#d-surface-parameters-surface">2D Surface parameters: SURFACE</a></li>
<li><a class="reference internal" href="#general-vector-parameters-gen-param">General vector parameters: GEN_PARAM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simulated-data">Simulated data</a><ul>
<li><a class="reference internal" href="#summary-summary">Summary: SUMMARY</a></li>
<li><a class="reference internal" href="#general-data-gen-data">General data: GEN_DATA</a></li>
<li><a class="reference internal" href="#keyword-results-custom-kw">Keyword results: CUSTOM_KW</a></li>
</ul>
</li>
<li><a class="reference internal" href="#enkf-heritage">EnKF heritage</a></li>
<li><a class="reference internal" href="#observations">Observations</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../introduction/index.html"
                        title="previous chapter">Introduction to ERT and Ensemble based methods</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../forward_model/index.html"
                        title="next chapter">Running simulations - the Forward Model</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/data_types/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-data-types-available-in-ert">
<h1>The data types available in ERT<a class="headerlink" href="#the-data-types-available-in-ert" title="Permalink to this headline">¶</a></h1>
<p>Very briefly described the purpose of ERT is to pass uncertain paramater values
to a simulator <a class="footnote-reference" href="#id2" id="id1">[1]</a>, in a form which works as suitable input to the simulator and
then subsequently load the results from the simulator. This means that data must
be formatted in a form which the simulator can load, and also that ERT must be
able to read files generated by the simulator.</p>
<p>The data managed by ERT are organized in different <em>data types</em> described in
this chapter. Configuring the data used in the conditioning project is a very
important part of setting up a ERT configuration file - in practical terms this
is how you configure which uncertainty parameters should be studied. The data
types in ert can be categorized in two ways:</p>
<ol class="arabic simple">
<li>How the data type behaves dynamically: is it a static parameter like porosity
or a relperm parameter - i.e. does it serve as <em>input</em> to the simulator, or
is it a quantity which is generated as a result from the simulation. When
understanding the model updating algorithm and process it is important to
understand this difference properly.</li>
<li>How the data type is implemented, what type of files does it and read write,
how is it configured and so on.</li>
</ol>
<p>NB: All datatypes have a common namespace; i.e. a globally unique keyword.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><em>Simulator</em> should in this context be understood as the complete
forward model, including various pre and post processing steps in
addition to the actual reservoir simulation.</td></tr>
</tbody>
</table>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The <em>parameter</em> datatypes will serve as input to the reservoir simulator. For a
pure uncertainty study they will pass right through, model updating update
parameters. Sample internally or load externally.</p>
<div class="section" id="scalar-parameters-with-a-template-gen-kw">
<h3>Scalar parameters with a template: GEN_KW<a class="headerlink" href="#scalar-parameters-with-a-template-gen-kw" title="Permalink to this headline">¶</a></h3>
<p>The GEN_KW datatype is used in situations where you have a handful of related
<a class="footnote-reference" href="#id4" id="id3">[2]</a> parameters. The intention behind the GEN_KW implementation is that ERT will
<em>sample</em> parameters randomly according to a distribution specified by the user,
then ERT will use the sampled values and a template file provided by the user to
generate a file which can be used by the simulator.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>ERT itself can not impose correlations among the parameters, if you need
that you must implement it yourself in the forward model.</td></tr>
</tbody>
</table>
<p>In the main config file a GEN_KW instance is defined as follows:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span>  <span class="n">ID</span>  <span class="n">templates</span><span class="o">/</span><span class="n">template</span><span class="o">.</span><span class="n">txt</span>  <span class="n">include</span><span class="o">.</span><span class="n">txt</span>  <span class="n">priors</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div></blockquote>
<p>Here ID is an (arbitrary) unique string, <code class="code docutils literal notranslate"><span class="pre">templates/template.txt</span></code> is the
name of a template file, <code class="code docutils literal notranslate"><span class="pre">include.txt</span></code> is the name of the file which is
made for each member based on the template file <code class="code docutils literal notranslate"><span class="pre">templates/template.txt</span></code>
and the prior distribution <code class="code docutils literal notranslate"><span class="pre">priors.txt</span></code> is a file containing a list of
parametrized keywords and a prior distribution for each. Note that you must
manually edit the input files of the simulator to ensure that the generated file
<code class="code docutils literal notranslate"><span class="pre">include.txt</span></code> is included.</p>
<p>Let us consider an example where the GEN_KW parameter type is used to estimate
pore volume multipliers in an Eclipse model. We could then declare a GEN_KW
instance in the main enkf configuration file:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span> <span class="n">PAR_MULTPV</span> <span class="n">multpv_template</span><span class="o">.</span><span class="n">txt</span> <span class="n">multpv</span><span class="o">.</span><span class="n">txt</span> <span class="n">multpv_priors</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>In the GRID or EDIT section of the ECLIPSE data file, we would
insert the following include statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INCLUDE</span>
 <span class="s1">&#39;multpv.txt&#39;</span> <span class="o">/</span>
</pre></div>
</div>
<p>The template file multpv_template.txt would contain some
parametrized ECLIPSE statements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BOX</span>
 <span class="mi">1</span> <span class="mi">10</span> <span class="mi">1</span> <span class="mi">30</span> <span class="mi">13</span> <span class="mi">13</span> <span class="o">/</span>
<span class="n">MULTPV</span>
 <span class="mi">300</span><span class="o">*&lt;</span><span class="n">MULTPV_BOX1</span><span class="o">&gt;</span> <span class="o">/</span>
<span class="n">ENDBOX</span>

<span class="n">BOX</span>
 <span class="mi">1</span> <span class="mi">10</span> <span class="mi">1</span> <span class="mi">30</span> <span class="mi">14</span> <span class="mi">14</span> <span class="o">/</span>
<span class="n">MULTPV</span>
 <span class="mi">300</span><span class="o">*&lt;</span><span class="n">MULTPV_BOX2</span><span class="o">&gt;</span> <span class="o">/</span>
<span class="n">ENDBOX</span>
</pre></div>
</div>
<p>Here, &lt;MULTPV_BOX1&gt; and &lt;MULTPV_BOX2&gt; will act as magic
strings. Note that the ‘&lt;’ ‘&gt;’ must be present around the
magic strings. In this case, the parameter configuration file
multpv_priors.txt could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MULTPV_BOX2</span> <span class="n">UNIFORM</span> <span class="mf">0.98</span> <span class="mf">1.03</span>
<span class="n">MULTPV_BOX1</span> <span class="n">UNIFORM</span> <span class="mf">0.85</span> <span class="mf">1.00</span>
</pre></div>
</div>
<p>In general, the first keyword on each line in the parameter
configuration file defines a key, which when found in the
template file enclosed in ‘&lt;’ and ‘&gt;’, is replaced with a
value. The rest of the line defines a prior distribution for
the key. See Prior distributions available in enkf for a list
of available prior distributions.</p>
<p><strong>Example: Using GEN_KW to estimate fault transmissibility multipliers</strong></p>
<p>Previously enkf supported a datatype MULTFLT for estimating
fault transmissibility multipliers. This has now been
depreceated, as the functionality can be easily achieved with
the help of GEN_KW. In th enkf config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span>  <span class="n">MY</span><span class="o">-</span><span class="n">FAULTS</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">tmpl</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">INC</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Here MY-FAULTS is the (arbitrary) key assigned to the fault
multiplers, MULTFLT.tmpl is the template file, which can look
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MULTFLT</span>
 <span class="s1">&#39;FAULT1&#39;</span>   <span class="o">&lt;</span><span class="n">FAULT1</span><span class="o">&gt;</span>  <span class="o">/</span>
 <span class="s1">&#39;FAULT2&#39;</span>   <span class="o">&lt;</span><span class="n">FAULT2</span><span class="o">&gt;</span>  <span class="o">/</span>
<span class="o">/</span>
</pre></div>
</div>
<p>and finally the initial distribution of the parameters FAULT1
and FAULT2 are defined in the file MULTFLT.txt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAULT1</span>   <span class="n">LOGUNIF</span>   <span class="mf">0.00001</span>   <span class="mf">0.1</span>
<span class="n">FAULT2</span>   <span class="n">UNIFORM</span>   <span class="mf">0.00</span>      <span class="mf">1.0</span>
</pre></div>
</div>
<p>The various prior distributions available for the <code class="docutils literal notranslate"><span class="pre">GEN_KW</span></code>
keyword are here <span class="xref std std-ref">prior distributions available in ERT</span></p>
<p>Loading GEN_KW values from an external file</p>
<p>The default use of the GEN_KW keyword is to let the ERT
application sample random values for the elements in the
GEN_KW instance, but it is also possible to tell ERT to load a
precreated set of data files, this can for instance be used as
a component in a experimental design based workflow. When
using external files to initialize the GEN_KW instances you
supply an extra keyword <code class="docutils literal notranslate"><span class="pre">INIT_FILE:/path/to/priors/files%d</span></code>
which tells where the prior files are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span>  <span class="n">MY</span><span class="o">-</span><span class="n">FAULTS</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">tmpl</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">INC</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">txt</span>    <span class="n">INIT_FILES</span><span class="p">:</span><span class="n">priors</span><span class="o">/</span><span class="n">multflt</span><span class="o">/</span><span class="n">faults</span><span class="o">%</span><span class="n">d</span>
</pre></div>
</div>
<p>In the example above you must prepare files
priors/multflt/faults0, priors/multflt/faults1,
… priors/multflt/faultsn which ert will load when you
initialize the case. The format of the GEN_KW input files can
be of two varieties:</p>
<ol class="arabic simple">
<li>The files can be plain ASCII text files with a list of numbers:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.25</span>
<span class="mf">2.67</span>
</pre></div>
</div>
<p>The numbers will be assigned to parameters in the order found in the MULTFLT.txt file.</p>
<ol class="arabic simple" start="2">
<li>Alternatively values and keywords can be interleaved as in:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAULT1</span> <span class="mf">1.25</span>
<span class="n">FAULT2</span> <span class="mf">2.56</span>
</pre></div>
</div>
<p>in this case the ordering can differ in the init files and the parameter file.</p>
<p>The heritage of the ERT program is based on the EnKF algorithm, and the EnKF algorithm evolves around Gaussian variables - internally the GEN_KW variables are assumed to be samples from the N(0,1) distribution, and the distributions specified in the parameters file are based on transformations starting with a N(0,1) distributed variable. The slightly awkward consequence of this is that to let your sampled values pass through ERT unmodified you must configure the distribution NORMAL 0 1 in the parameter file; alternatively if you do not intend to update the GEN_KW variable you can use the distribution RAW.</p>
</div></blockquote>
</div>
<div class="section" id="d-field-parameters-field">
<h3>3D field parameters: FIELD<a class="headerlink" href="#d-field-parameters-field" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="d-surface-parameters-surface">
<h3>2D Surface parameters: SURFACE<a class="headerlink" href="#d-surface-parameters-surface" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="general-vector-parameters-gen-param">
<h3>General vector parameters: GEN_PARAM<a class="headerlink" href="#general-vector-parameters-gen-param" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="simulated-data">
<h2>Simulated data<a class="headerlink" href="#simulated-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="summary-summary">
<h3>Summary: SUMMARY<a class="headerlink" href="#summary-summary" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="general-data-gen-data">
<h3>General data: GEN_DATA<a class="headerlink" href="#general-data-gen-data" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="keyword-results-custom-kw">
<h3>Keyword results: CUSTOM_KW<a class="headerlink" href="#keyword-results-custom-kw" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="enkf-heritage">
<h2>EnKF heritage<a class="headerlink" href="#enkf-heritage" title="Permalink to this headline">¶</a></h2>
<p>With regards to the datatypes in ERT this is a part of the application where the
EnKF heritage shows through quite clearly, the datetypes offered by ERT would
probably be different if ERT was made for Ensemble Smoother from the outset.
Pecularites of EnKF heritage include:</p>
<ol class="arabic simple">
<li>The <cite>FIELD</cite> implementation can behave both as a dynamic quantity, i.e.
pressure and saturation, and static property like porosity. In ERT it is
currently <em>only used</em> as a parameter.</li>
<li>The parameter types have an internal pseudo time dependence corresponding to
the “update time” induced by the EnKF scheme. This pseudo time dependence is
not directly exposed to the user, but it is still part of the implementation
and e.g. when writing plugins which work with parameter data managed by ERT
you must relate to it.</li>
<li>The time dependence of the <cite>GEN_DATA</cite> implementation. This is just too
complex, there have been numerous problems with people who configure the
<cite>GEN_DATA</cite> keywords incorrectly.</li>
</ol>
</div>
<div class="section" id="observations">
<h2>Observations<a class="headerlink" href="#observations" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../forward_model/index.html" title="Running simulations - the Forward Model"
             >next</a> |</li>
        <li class="right" >
          <a href="../introduction/index.html" title="Introduction to ERT and Ensemble based methods"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../manual.html">ERT 2.3 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Equinor.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>