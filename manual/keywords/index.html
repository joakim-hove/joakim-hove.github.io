

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Keywords for the configuration file &#8212; ERT 2.3 documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release notes for ERT" href="../changes/index.html" />
    <link rel="prev" title="Use the ERT API to create custom functionality" href="../scripting/index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../changes/index.html" title="Release notes for ERT"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../scripting/index.html" title="Use the ERT API to create custom functionality"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../manual.html">ERT 2.3 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../manual.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Keywords for the configuration file</a><ul>
<li><a class="reference internal" href="#general-overview">General overview</a></li>
<li><a class="reference internal" href="#list-of-keywords">List of keywords</a></li>
<li><a class="reference internal" href="#basic-required-keywords">Basic required keywords</a></li>
<li><a class="reference internal" href="#basic-optional-keywords">Basic optional keywords</a></li>
<li><a class="reference internal" href="#keywords-controlling-the-simulations">Keywords controlling the simulations</a></li>
<li><a class="reference internal" href="#parameterization-keywords">Parameterization keywords</a></li>
<li><a class="reference internal" href="#keywords-controlling-the-es-algorithm">Keywords controlling the ES algorithm</a></li>
<li><a class="reference internal" href="#analysis-module">Analysis module</a></li>
<li><a class="reference internal" href="#advanced-optional-keywords">Advanced optional keywords</a></li>
<li><a class="reference internal" href="#keywords-related-to-running-the-forward-model">Keywords related to running the forward model</a></li>
<li><a class="reference internal" href="#configuring-lsf-access">Configuring LSF access</a></li>
<li><a class="reference internal" href="#configuring-torque-access">Configuring TORQUE access</a></li>
<li><a class="reference internal" href="#configuring-the-rsh-queue">Configuring the RSH queue</a></li>
<li><a class="reference internal" href="#keywords-related-to-plotting">Keywords related to plotting</a></li>
<li><a class="reference internal" href="#manipulating-the-unix-environment">Manipulating the Unix environment</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../scripting/index.html"
                        title="previous chapter">Use the ERT API to create custom functionality</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../changes/index.html"
                        title="next chapter">Release notes for ERT</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/keywords/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="keywords-for-the-configuration-file">
<span id="ert-kw-full-doc"></span><h1>Keywords for the configuration file<a class="headerlink" href="#keywords-for-the-configuration-file" title="Permalink to this headline">¶</a></h1>
<p><span class="xref std std-ref">Go to main ERT page</span></p>
<div class="section" id="general-overview">
<h2>General overview<a class="headerlink" href="#general-overview" title="Permalink to this headline">¶</a></h2>
<p>The enkf application is started with a single argument, which is the name of the
configuration file to be used. The enkf configuration file serves several
purposes, which are:</p>
<ul class="simple">
<li>Defining which ECLIPSE model to use, i.e. giving a data, grid and schedule file.</li>
<li>Defining which observation file to use.</li>
<li>Defining how to run simulations.</li>
<li>Defining where to store results.</li>
<li>Creating a parametrization of the ECLIPSE model.</li>
</ul>
<p>The configuration file is a plain text file, with one statement per line. The
first word on each line is a keyword, which then is followed by a set of
arguments that are unique to the particular keyword. Except for the DEFINE
keyword, ordering of the keywords is not significant. Similarly to ECLIPSE data
files, lines starting with “–” are treated as comments.</p>
<p>The keywords in the enkf configuration file can roughly be divded into two
groups:</p>
<ul class="simple">
<li>Basic required keywords not related to parametrization. I.e., keywords giving
the data, grid, schedule and observation file, defining how to run simulations
and how to store results. These keywords are described in <a class="reference internal" href="#id1"><span class="std std-ref">Basic required
keywords.</span></a></li>
<li>Basic optional keywords not related to parametrization. These keywords are
described in <a class="reference internal" href="#id2"><span class="std std-ref">Basic optional keywords</span></a>.</li>
<li>Keywords related to parametrization of the ECLIPSE model. These keywords are
described in <a class="reference internal" href="#id4"><span class="std std-ref">Parametrization keywords</span></a>.</li>
<li>Advanced keywords not related to parametrization. These keywords are described
in <a class="reference internal" href="#id11"><span class="std std-ref">Advanced optional keywords</span></a>.</li>
</ul>
</div>
<div class="section" id="list-of-keywords">
<h2>List of keywords<a class="headerlink" href="#list-of-keywords" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="12%" />
<col width="9%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Keyword name</th>
<th class="head">Required by user?</th>
<th class="head">Default value</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#add-fixed-length-schedule-kw"><span class="std std-ref">ADD_FIXED_LENGTH_SCHEDULE_KW</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Supporting unknown SCHEDULE keywords.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#analysis-copy"><span class="std std-ref">ANALYSIS_COPY</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Create new instance of analysis module</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#analysis-load"><span class="std std-ref">ANALYSIS_LOAD</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Load analysis module</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#analysis-set-var"><span class="std std-ref">ANALYSIS_SET_VAR</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Set analysis module internal state variable</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#analysis-select"><span class="std std-ref">ANALYSIS_SELECT</span></a></td>
<td>NO</td>
<td>STD_ENKF</td>
<td>Select analysis module to use in update</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">CASE_TABLE</span></td>
<td>NO</td>
<td>&#160;</td>
<td>For running sensitivities you can give the cases descriptive names</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">CONTAINER</span></td>
<td>NO</td>
<td>&#160;</td>
<td>…</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#custom-kw"><span class="std std-ref">CUSTOM_KW</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Ability to load arbitrary values from the forward model.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#data-file"><span class="std std-ref">DATA_FILE</span></a></td>
<td>YES</td>
<td>&#160;</td>
<td>Provide an ECLIPSE data file for the problem.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#data-kw"><span class="std std-ref">DATA_KW</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Replace strings in ECLIPSE .DATA files</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">DBASE_TYPE</span></td>
<td>NO</td>
<td>BLOCK_FS</td>
<td>Which ‘database’ system should be used for storage</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#define"><span class="std std-ref">DEFINE</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Define keywords with config scope</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#delete-runpath"><span class="std std-ref">DELETE_RUNPATH</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Explicitly tell ert to delete the runpath when a job is complete</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#eclbase"><span class="std std-ref">ECLBASE</span></a></td>
<td>YES</td>
<td>&#160;</td>
<td>Define a name for the ECLIPSE simulations.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#end-date"><span class="std std-ref">END_DATE</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>You can tell ERT how lon the simulations should be - for error check</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#enkf-alpha"><span class="std std-ref">ENKF_ALPHA</span></a></td>
<td>NO</td>
<td>1.50</td>
<td>Parameter controlling outlier behaviour in EnKF algorithm</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#enkf-bootstrap"><span class="std std-ref">ENKF_BOOTSTRAP</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Should we bootstrap the Kalman gain estimate</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">ENKF_CROSS_VALIDATION</span></td>
<td>NO</td>
<td>…</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#enkf-cv-folds"><span class="std std-ref">ENKF_CV_FOLDS</span></a></td>
<td>NO</td>
<td>10</td>
<td>Number of folds used in the Cross-Validation scheme</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">ENKF_KERNEL_PARAM</span></td>
<td>NO</td>
<td>1</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#enkf-local-cv"><span class="std std-ref">ENKF_LOCAL_CV</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Should we estimate the subspace dimenseion using Cross-Validation</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#enkf-merge-observations"><span class="std std-ref">ENKF_MERGE_OBSERVATIONS</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Should observations from many times be merged together</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#enkf-mode"><span class="std std-ref">ENKF_MODE</span></a></td>
<td>NO</td>
<td>STANDARD</td>
<td>Which EnKF should be used</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#enkf-pen-press"><span class="std std-ref">ENKF_PEN_PRESS</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Should we want to use a penalised PRESS statistic in model selection?</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#enkf-rerun"><span class="std std-ref">ENKF_RERUN</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Should the simulations be restarted from time zero after each update.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#enkf-scaling"><span class="std std-ref">ENKF_SCALING</span></a></td>
<td>NO</td>
<td>TRUE</td>
<td>Do we want to normalize the data ensemble to have unit variance?</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">ENKF_TRUNCATION</span></td>
<td>NO</td>
<td>0.99</td>
<td>Cutoff used on singular value spectrum.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#enspath"><span class="std std-ref">ENSPATH</span></a></td>
<td>NO</td>
<td>storage</td>
<td>Folder used for storage of simulation results.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#field"><span class="std std-ref">FIELD</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Ads grid parameters</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#forward-model"><span class="std std-ref">FORWARD_MODEL</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Add the running of a job to the simulation forward model.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#gen-data"><span class="std std-ref">GEN_DATA</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Specify a general type of data created/updated by the forward model.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#gen-kw"><span class="std std-ref">GEN_KW</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Add a scalar parameter.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">GEN_KW_TAG_FORMAT</span></td>
<td>NO</td>
<td>&lt;%s&gt;</td>
<td>Format used to add keys in the GEN_KW template files.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">GEN_KW_EXPORT_FILE</span></td>
<td>NO</td>
<td>parameter.txt</td>
<td>Name of file to export GEN_KW parameters to.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#gen-param"><span class="std std-ref">GEN_PARAM</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Add a general parameter.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#grid"><span class="std std-ref">GRID</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Provide an ECLIPSE grid for the reservoir model.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#history-source"><span class="std std-ref">HISTORY_SOURCE</span></a></td>
<td>NO</td>
<td>REFCASE_HISTORY</td>
<td>Source used for historical values.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hook-workflow"><span class="std std-ref">HOOK_WORKFLOW</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Install a workflow to be run automatically.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">IGNORE_SCHEDULE</span></td>
<td>NO</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">INSTALL_JOB</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Install a job for use in a forward model.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">ITER_CASE</span></td>
<td>NO</td>
<td>IES%d</td>
<td>Case name format - iterated ensemble smoother</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">ITER_COUNT</span></td>
<td>NO</td>
<td>4</td>
<td>Number of iterations - iterated ensemble smoother</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">ITER_RETRY_COUNT</span></td>
<td>NO</td>
<td>4</td>
<td>Number of retries for a iteration - iterated ensemble smoother</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#jobname"><span class="std std-ref">JOBNAME</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Name used for simulation files. An alternative to ECLBASE.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#job-script"><span class="std std-ref">JOB_SCRIPT</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Python script managing the forward model.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">LOAD_SEED</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Load random seed from given file.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">LOAD_WORKFLOW</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Load a workflow into ERT.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">LOAD_WORKFLOW_JOB</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Load a workflow job into ERT.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">LICENSE_PATH</span></td>
<td>NO</td>
<td>&#160;</td>
<td>A path where ert-licenses to e.g. RMS are stored.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">LOCAL_CONFIG</span></td>
<td>NO</td>
<td>&#160;</td>
<td>A file with configuration information for local analysis.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">LOG_FILE</span></td>
<td>NO</td>
<td>log</td>
<td>Name of log file</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">LOG_LEVEL</span></td>
<td>NO</td>
<td>1</td>
<td>How much logging?</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#lsf-queue"><span class="std std-ref">LSF_QUEUE</span></a></td>
<td>NO</td>
<td>normal</td>
<td>Name of LSF queue.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">LSF_RESOURCES</span></td>
<td>NO</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#lsf-server"><span class="std std-ref">LSF_SERVER</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Set server used when submitting LSF jobs.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">MAX_ITER_COUNT</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Maximal number of iterations - iterated ensemble smoother.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">MAX_RESAMPLE</span></td>
<td>NO</td>
<td>1</td>
<td>How many times should ert resample &amp; retry a simulation.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">MAX_RUNNING_RSH</span></td>
<td>NO</td>
<td>&#160;</td>
<td>The maximum number of running jobs when using RSH queue system.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#max-runtime"><span class="std std-ref">MAX_RUNTIME</span></a></td>
<td>NO</td>
<td>0</td>
<td>Set the maximum runtime in seconds for a realization.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">MAX_SUBMIT</span></td>
<td>NO</td>
<td>2</td>
<td>How many times should the queue system retry a simulation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#min-realizations"><span class="std std-ref">MIN_REALIZATIONS</span></a></td>
<td>NO</td>
<td>0</td>
<td>Set the number of minimum reservoir realizations to run before long running realizations are stopped. Keyword STOP_LONG_RUNNING must be set to TRUE when MIN_REALIZATIONS are set.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#num-realizations"><span class="std std-ref">NUM_REALIZATIONS</span></a></td>
<td>YES</td>
<td>&#160;</td>
<td>Set the number of reservoir realizations to use.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#obs-config"><span class="std std-ref">OBS_CONFIG</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>File specifying observations with uncertainties.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#plot-driver"><span class="std std-ref">PLOT_SETTINGS</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Possibility to configure some aspects of plotting.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">PRE_CLEAR_RUNPATH</span></td>
<td>NO</td>
<td>FALSE</td>
<td>Should the runpath be cleared before initializing?</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#queue-system"><span class="std std-ref">QUEUE_SYSTEM</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>System used for running simulation jobs.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#refcase"><span class="std std-ref">REFCASE</span></a></td>
<td>NO (see HISTORY_SOURCE and SUMMARY)</td>
<td>&#160;</td>
<td>Reference case used for observations and plotting.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">REFCASE_LIST</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Full path to Eclipse .DATA files containing completed runs (which you can add to plots)</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">RERUN_PATH</span></td>
<td>NO</td>
<td>&#160;</td>
<td>…</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">RERUN_START</span></td>
<td>NO</td>
<td>0</td>
<td>…</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#rft-config"><span class="std std-ref">RFT_CONFIG</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Config file specifying wellnames and dates for rft-measurments. Used for plotting. The format has to be name day month year (ex. Q-2FI 02 08 1973), with a new entry on a new line.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#rftpath"><span class="std std-ref">RFTPATH</span></a></td>
<td>NO</td>
<td>rft</td>
<td>Path to where the rft well observations are stored</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#rsh-command"><span class="std std-ref">RSH_COMMAND</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Command used for remote shell operations.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#rsh-host"><span class="std std-ref">RSH_HOST</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Remote host used to run forward model.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">RUNPATH</span></td>
<td>NO</td>
<td>simulations/realization%d</td>
<td>Directory to run simulations</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">RUN_TEMPLATE</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Install arbitrary files in the runpath directory.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#std-scale-correlated-obs"><span class="std std-ref">STD_SCALE_CORRELATED_OBS</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Try to estimate the correlations in the data to inflate the observation std.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#schedule-file"><span class="std std-ref">SCHEDULE_FILE</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Provide an ECLIPSE schedule file for the problem.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#schedule-prediction-file"><span class="std std-ref">SCHEDULE_PREDICTION_FILE</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Schedule prediction file.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#setenv"><span class="std std-ref">SETENV</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>You can modify the UNIX environment with SETENV calls.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">SINGLE_NODE_UPDATE</span></td>
<td>NO</td>
<td>FALSE</td>
<td>…</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#stop-long-running"><span class="std std-ref">STOP_LONG_RUNNING</span></a></td>
<td>NO</td>
<td>FALSE</td>
<td>Stop long running realizations after minimum number of realizations (MIN_REALIZATIONS) have run.</td>
</tr>
<tr class="row-even"><td><span class="xref std std-ref">STORE_SEED</span></td>
<td>NO</td>
<td>&#160;</td>
<td>File where the random seed used is stored.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#summary"><span class="std std-ref">SUMMARY</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Add summary variables for internalization.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#surface"><span class="std std-ref">SURFACE</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Surface parameter read from RMS IRAP file.</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">TORQUE_QUEUE</span></td>
<td>NO</td>
<td>&#160;</td>
<td>…</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#time-map"><span class="std std-ref">TIME_MAP</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Ability to manually enter a list of dates to establish report step &lt;-&gt; dates mapping.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#umask"><span class="std std-ref">UMASK</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Control the permissions on files created by ERT.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#update-log-path"><span class="std std-ref">UPDATE_LOG_PATH</span></a></td>
<td>NO</td>
<td>update_log</td>
<td>Summary of the EnKF update steps are stored in this directory.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#update-path"><span class="std std-ref">UPDATE_PATH</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Modify a UNIX path variable like LD_LIBRARY_PATH.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#update-settings"><span class="std std-ref">UPDATE_SETTINGS</span></a></td>
<td>NO</td>
<td>&#160;</td>
<td>Possibility to configure some common aspects of the Smoother update.|</td>
</tr>
<tr class="row-odd"><td><span class="xref std std-ref">WORKFLOW_JOB_DIRECTORY</span></td>
<td>NO</td>
<td>&#160;</td>
<td>Directory containing workflow jobs.</td>
</tr>
</tbody>
</table>
<p>:ref:` &lt;&gt;`</p>
</div>
<div class="section" id="basic-required-keywords">
<h2>Basic required keywords<a class="headerlink" href="#basic-required-keywords" title="Permalink to this headline">¶</a></h2>
<p id="id1">These keywords must be set to make the enkf function properly.</p>
<div class="topic" id="data-file">
<p class="topic-title first">DATA_FILE</p>
<div class="line-block">
<div class="line">This is the name of ECLIPSE data file used to control the simulations. The</div>
</div>
<p>data file should be prepared according to the guidelines given in Preparing an
ECLIPSE reservoir model for use with enkf.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Load</span> <span class="n">the</span> <span class="n">data</span> <span class="n">file</span> <span class="n">called</span> <span class="n">ECLIPSE</span><span class="o">.</span><span class="n">DATA</span>
<span class="n">DATA_FILE</span> <span class="n">ECLIPSE</span><span class="o">.</span><span class="n">DATA</span>
</pre></div>
</div>
</div>
<div class="topic" id="eclbase">
<p class="topic-title first">ECLBASE</p>
<div class="line-block">
<div class="line">The ECLBASE keyword sets the basename used for the ECLIPSE simulations. It</div>
</div>
<p>can (and should, for your convenience) contain a %d specifier, which will be
replaced with the realization numbers when running ECLIPSE. Note that due to
limitations in ECLIPSE, the ECLBASE string must be in strictly upper or lower
case.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Use</span> <span class="n">MY_VERY_OWN_OIL_FIELD</span><span class="o">-</span><span class="mi">0</span> <span class="n">etc</span><span class="o">.</span> <span class="k">as</span> <span class="n">basename</span><span class="o">.</span>
<span class="o">--</span> <span class="n">When</span> <span class="n">ECLIPSE</span> <span class="ow">is</span> <span class="n">running</span><span class="p">,</span> <span class="n">the</span> <span class="o">%</span><span class="n">d</span> <span class="n">will</span> <span class="n">be</span><span class="p">,</span>
<span class="o">--</span> <span class="n">replaced</span> <span class="k">with</span> <span class="n">realization</span> <span class="n">number</span><span class="p">,</span> <span class="n">giving</span><span class="p">:</span>
<span class="o">--</span>
<span class="o">--</span> <span class="n">MY_VERY_OWN_OIL_FIELD</span><span class="o">-</span><span class="mi">0</span>
<span class="o">--</span> <span class="n">MY_VERY_OWN_OIL_FIELD</span><span class="o">-</span><span class="mi">1</span>
<span class="o">--</span> <span class="n">MY_VERY_OWN_OIL_FIELD</span><span class="o">-</span><span class="mi">2</span>
<span class="o">--</span> <span class="o">...</span>
<span class="o">--</span> <span class="ow">and</span> <span class="n">so</span> <span class="n">on</span><span class="o">.</span>
<span class="n">ECLBASE</span> <span class="n">MY_VERY_OWN_OIL_FIELD</span><span class="o">-%</span><span class="n">d</span>
</pre></div>
</div>
</div>
<div class="topic" id="jobname">
<p class="topic-title first">JOBNAME</p>
<p>As an alternative to the ECLBASE keyword you can use the JOBNAME keyword; in
particular in cases where your forward model does not include ECLIPSE at all
that makes more sense. If JOBANME is used instead of ECLBASE the same rules of
no-mixed-case apply.</p>
</div>
<div class="topic" id="grid">
<p class="topic-title first">GRID</p>
<p>This is the name of an existing GRID/EGRID file for your ECLIPSE model. If you
had to create a new grid file when preparing your ECLIPSE reservoir model for
use with enkf, this should point to the new .EGRID file.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Load</span> <span class="n">the</span> <span class="o">.</span><span class="n">EGRID</span> <span class="n">file</span> <span class="n">called</span> <span class="n">MY_GRID</span><span class="o">.</span><span class="n">EGRID</span>
<span class="n">GRID</span> <span class="n">MY_GRID</span><span class="o">.</span><span class="n">EGRID</span>
</pre></div>
</div>
</div>
<div class="topic" id="num-realizations">
<p class="topic-title first">NUM_REALIZATIONS</p>
<p>This is just the size of the ensemble, i.e. the number of realizations/members
in the ensemble.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Use</span> <span class="mi">200</span> <span class="n">realizations</span><span class="o">/</span><span class="n">members</span>
<span class="n">NUM_REALIZATIONS</span> <span class="mi">200</span>
</pre></div>
</div>
</div>
<div class="topic" id="schedule-file">
<p class="topic-title first">SCHEDULE_FILE</p>
<p>This keyword should be the name a text file containing the SCHEDULE section of
the ECLIPSE data file. It should be prepared in accordance with the guidelines
given in Preparing an ECLIPSE reservoir model for use with enkf. This SCHEDULE
section will be used to control the ECLIPSE simulations. You can optionally
give a second filename, which is the name of file which will be written into
the directories for running ECLIPSE.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Parse</span> <span class="n">MY_SCHEDULE</span><span class="o">.</span><span class="n">SCH</span><span class="p">,</span> <span class="n">call</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">file</span> <span class="n">ECLIPSE_SCHEDULE</span><span class="o">.</span><span class="n">SCH</span>
<span class="n">SCHEDULE_FILE</span> <span class="n">MY_SCHEDULE</span><span class="o">.</span><span class="n">SCH</span> <span class="n">ECLIPSE_SCHEDULE</span><span class="o">.</span><span class="n">SCH</span>
</pre></div>
</div>
<p>Observe that the SCHEDULE_FILE keyword is only required when you need ERT to
stop and restart your simulations; i.e. when you are using the EnKF algorithm.
If you are only using ERT to your simulations; or using smoother update it is
recommended to leave the SCHEDULE_FILE keyword out. In that case you must make
sure that the ECLIPSE datafile correctly includes the SCHEDULE section.</p>
</div>
</div>
<div class="section" id="basic-optional-keywords">
<h2>Basic optional keywords<a class="headerlink" href="#basic-optional-keywords" title="Permalink to this headline">¶</a></h2>
<p id="id2">These keywords are optional. However, they serve many useful purposes, and it is
recommended that you read through this section to get a thorough idea of what’s
possible to do with the enkf application.</p>
<div class="topic" id="data-kw">
<p class="topic-title first">DATA_KW</p>
<p>The keyword DATA_KW can be used for inserting strings into placeholders in the
ECLIPSE data file. For instance, it can be used to insert include paths.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Define</span> <span class="n">the</span> <span class="n">alias</span> <span class="n">MY_PATH</span> <span class="n">using</span> <span class="n">DATA_KW</span><span class="o">.</span> <span class="n">Any</span> <span class="n">instances</span> <span class="n">of</span> <span class="o">&lt;</span><span class="n">MY_PATH</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">yes</span><span class="p">,</span> <span class="k">with</span> <span class="n">brackets</span><span class="p">)</span>
<span class="o">--</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">ECLIPSE</span> <span class="n">data</span> <span class="n">file</span> <span class="n">will</span> <span class="n">now</span> <span class="n">be</span> <span class="n">replaced</span> <span class="k">with</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">my_own_disk</span><span class="o">/</span><span class="n">my_reservoir_model</span>
<span class="o">--</span> <span class="n">when</span> <span class="n">running</span> <span class="n">the</span> <span class="n">ECLIPSE</span> <span class="n">jobs</span><span class="o">.</span>
<span class="n">DATA_KW</span>  <span class="n">MY_PATH</span>  <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">my_own_disk</span><span class="o">/</span><span class="n">my_reservoir_model</span>
</pre></div>
</div>
<p>The DATA_KW keyword is of course optional. Note also that the enkf has some
built in magic strings.</p>
</div>
<div class="topic" id="delete-runpath">
<p class="topic-title first">DELETE_RUNPATH</p>
<p>When the ert application is running it creates directories for
the forward model simulations, one for each realization. When
the simulations are done, ert will load the results into the
internal database. By default the realization folders will be
left intact after ert has loaded the results, but using the
keyword DELETE_RUNPATH you can request to have (some of) the
directories deleted after results have been loaded.</p>
<p><em>Example A:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Delete</span> <span class="n">simulation</span> <span class="n">directories</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">99</span>
<span class="n">DELETE_RUNPATH</span> <span class="mi">0</span><span class="o">-</span><span class="mi">99</span>
</pre></div>
</div>
<p><em>Example B:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Delete</span> <span class="n">simulation</span> <span class="n">directories</span> <span class="mi">0</span> <span class="n">to</span> <span class="mi">10</span> <span class="k">as</span> <span class="n">well</span> <span class="k">as</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span> <span class="ow">and</span> <span class="mf">20.</span>
<span class="n">DELETE_RUNPATH</span> <span class="mi">0</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span>
</pre></div>
</div>
<p>The DELETE_RUNPATH keyword is optional.</p>
</div>
<div class="topic" id="end-date">
<p class="topic-title first">END_DATE</p>
<p>When running a set of models from beginning to end ERT does
not now in advance how long the simulation is supposed to be,
it is therefor impossible beforehand to determine which
restart file number should be used as target file, and the
procedure used for EnKF runs can not be used to verify that an
ECLIPSE simulation has run to the end.</p>
<p>By using the END_DATE keyword you can tell ERT that the
simulation should go at least up to the date given by
END_DATE, otherwise they will be regarded as failed. The
END_DATE does not need to correspond exactly to the end date
of the simulation, it must just be set so that all simulations
which go to or beyond END_DATE are regarded as successfull.</p>
<p><em>Example:</em></p>
<dl class="docutils">
<dt>::</dt>
<dd>END_DATE  10/10/2010</dd>
</dl>
<p>With this END_DATE setting all simulations which have gone to
at least 10.th of October 2010 are OK.</p>
</div>
<div class="topic" id="enspath">
<p class="topic-title first">ENSPATH</p>
<p>The ENSPATH should give the name of a folder that will be used
for storage by the enkf application. Note that the contents of
this folder is not intended for human inspection. By default,
ENSPATH is set to “storage”.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Use</span> <span class="n">internal</span> <span class="n">storage</span> <span class="ow">in</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">my_big_enkf_disk</span>
<span class="n">ENSPATH</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">my_big_enkf_disk</span>
</pre></div>
</div>
<p>The ENSPATH keyword is optional.</p>
</div>
<div class="topic" id="history-source">
<p class="topic-title first">HISTORY_SOURCE</p>
<p>In the observation configuration file you can enter
observations with the keyword HISTORY_OBSERVATION; this means
that ERT will the observed ‘true’ values from the model
history. Practically the historical values can be fetched
either from the SCHEDULE file or from a reference case. What
source to use for the historical values can be controlled with
the HISTORY_SOURCE keyword. The different possible values for
the HISTORY_SOURCE keyword are:</p>
<dl class="docutils">
<dt>REFCASE_HISTORY</dt>
<dd>This is the default value for HISTORY_SOURCE,
ERT will fetch the historical values from the <em>xxxH</em>
keywords in the refcase summary, e.g. observations of
WGOR:OP_1 is based the WGORH:OP_1 vector from the
refcase summary.</dd>
<dt>REFCASE_SIMULATED In this case the historical values are based on the</dt>
<dd>simulated values from the refcase, this is mostly relevant when a you want
compare with another case which serves as ‘the truth’.</dd>
<dt>SCHEDULE Load historical values from the WCONHIST and WCONINJE keywords in the</dt>
<dd>Schedule file.</dd>
</dl>
<p>When setting HISTORY_SOURCE to either REFCASE_SIMULATED or REFCASE_HISTORY you
must also set the REFCASE variable to point to the ECLIPSE data file in an
existing reference case (should be created with the same schedule file as you
are using now).</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Use</span> <span class="n">historic</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">reference</span> <span class="n">case</span>
<span class="n">HISTORY_SOURCE</span>  <span class="n">REFCASE_HISTORY</span>
<span class="n">REFCASE</span>         <span class="o">/</span><span class="n">somefolder</span><span class="o">/</span><span class="n">ECLIPSE</span><span class="o">.</span><span class="n">DATA</span>
</pre></div>
</div>
<p>The HISTORY_SOURCE keyword is optional.</p>
</div>
<div class="topic" id="refcase">
<p class="topic-title first">REFCASE</p>
<p>With the REFCASE key you can supply ert with a reference case which can be
used for observations (see HISTORY_SOURCE), if you want to use wildcards with
the SUMMARY keyword you also must supply a REFCASE keyword. The REFCASE
keyword should just point to an existing ECLIPSE data file; ert will then look
up and load the corresponding summary results.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">The</span> <span class="n">REFCASE</span> <span class="n">keyword</span> <span class="n">points</span> <span class="n">to</span> <span class="n">the</span> <span class="n">datafile</span> <span class="n">of</span> <span class="n">an</span> <span class="n">existing</span> <span class="n">ECLIPSE</span> <span class="n">simulation</span><span class="o">.</span>
<span class="n">REFCASE</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">somewhere</span><span class="o">/</span><span class="n">SIM_01_BASE</span><span class="o">.</span><span class="n">DATA</span>
</pre></div>
</div>
</div>
<div class="topic" id="install-job">
<p class="topic-title first">INSTALL_JOB</p>
<p>The INSTALL_JOB keyword is used to learn the enkf application how to run
external applications and scripts, i.e. defining a job. After a job has been
defined with INSTALL_JOB, it can be used with the FORWARD_MODEL keyword. For
example, if you have a script which generates relative permeability curves
from a set of parameters, it can be added as a job, allowing you to do history
matching and sensitivity analysis on the parameters defining the relative
permeability curves.</p>
<p>The INSTALL_JOB keyword takes two arguments, a job name and the name of a
configuration file for that particular job.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Define</span> <span class="n">a</span> <span class="n">Lomeland</span> <span class="n">relative</span> <span class="n">permeabilty</span> <span class="n">job</span><span class="o">.</span>
<span class="o">--</span> <span class="n">The</span> <span class="n">file</span> <span class="n">jobs</span><span class="o">/</span><span class="n">lomeland</span><span class="o">.</span><span class="n">txt</span> <span class="n">contains</span> <span class="n">a</span> <span class="n">detailed</span>
<span class="o">--</span> <span class="n">specification</span> <span class="n">of</span> <span class="n">the</span> <span class="n">job</span><span class="o">.</span>
<span class="n">INSTALL_JOB</span> <span class="n">LOMELAND</span> <span class="n">jobs</span><span class="o">/</span><span class="n">lomeland</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The configuration file used to specify an external job is easy to use and very
flexible. It is documented in Customizing the simulation workflow in enkf.</p>
<p>The INSTALL_JOB keyword is optional.</p>
</div>
<div class="topic" id="obs-config">
<p class="topic-title first">OBS_CONFIG</p>
<p>The OBS_CONFIG key should point to a file defining observations and associated
uncertainties. The file should be in plain text and formatted according to the
guidelines given in Creating an observation file for use with enkf.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">observations</span> <span class="ow">in</span> <span class="n">my_observations</span><span class="o">.</span><span class="n">txt</span>
<span class="n">OBS_CONFIG</span> <span class="n">my_observations</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The OBS_CONFIG keyword is optional, but for your own convenience, it is
strongly recommended to provide an observation file.</p>
</div>
<div class="topic" id="result-path">
<p class="topic-title first">RESULT_PATH</p>
<p>The enkf application will print some simple tabulated results at each report
step. The RESULT_PATH keyword should point to a folder where the tabulated
results are to be written. It can contain a %d specifier, which will be
replaced with the report step by enkf. The default value for RESULT_PATH is
“results/step_%d”.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Changing</span> <span class="n">RESULT_PATH</span>
<span class="n">RESULT_PATH</span> <span class="n">my_nice_results</span><span class="o">/</span><span class="n">step</span><span class="o">-%</span><span class="n">d</span>
</pre></div>
</div>
<p>The RESULT_PATH keyword is optional.</p>
</div>
<div class="topic" id="runpath">
<p class="topic-title first">RUNPATH</p>
<p>The RUNPATH keyword should give the name of the folders where the ECLIPSE
simulations are executed. It should contain at least one %d specifier, which
will be replaced by the realization number when the enkf creates the folders.
Optionally, it can contain one more %d specifier, which will be replaced by
the iteration number.</p>
<p>By default, RUNPATH is set to “simulations/realization-%d”.</p>
<p><em>Example A:</em></p>
<dl class="docutils">
<dt>::</dt>
<dd>– Giving a RUNPATH with just one %d specifer.
RUNPATH /mnt/my_scratch_disk/realization-%d</dd>
</dl>
<p><em>Example B:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Giving</span> <span class="n">a</span> <span class="n">RUNPATH</span> <span class="k">with</span> <span class="n">two</span> <span class="o">%</span><span class="n">d</span> <span class="n">specifers</span><span class="o">.</span>
<span class="n">RUNPATH</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">my_scratch_disk</span><span class="o">/</span><span class="n">realization</span><span class="o">-%</span><span class="n">d</span><span class="o">/</span><span class="n">iteration</span><span class="o">-%</span><span class="n">d</span>
</pre></div>
</div>
<p>The RUNPATH keyword is optional.</p>
</div>
<p>When running workflows based on external scripts it is necessary to ‘tell’ the
external script in some way or another were all the realisations are located in
the filesystem. Since the number of realisations can be quite high this will
easily overflow the commandline buffer; the solution which is used is therefor
to let ert write a reagular file which looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>   <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">realisation0</span>   <span class="n">CASE0</span>   <span class="nb">iter</span>
<span class="mi">1</span>   <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">realisation1</span>   <span class="n">CASE1</span>   <span class="nb">iter</span>
<span class="o">...</span>
<span class="n">N</span>   <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">realisationN</span>   <span class="n">CASEN</span>   <span class="nb">iter</span>
</pre></div>
</div>
<p>The path to this file can then be passed to the scripts using the
magic string &lt;RUNPATH_FILE&gt;. The RUNPATH_FILE will by default be
stored as .ert_runpath_list in the same directory as the configuration
file, but you can set it to something else with the RUNPATH_FILE key.</p>
</div>
<div class="section" id="keywords-controlling-the-simulations">
<h2>Keywords controlling the simulations<a class="headerlink" href="#keywords-controlling-the-simulations" title="Permalink to this headline">¶</a></h2>
<div class="topic" id="min-realizations">
<span id="id3"></span><p class="topic-title first">MIN_REALIZATIONS</p>
<p>MIN_REALIZATIONS is the minimum number of realizations that
must have succeeded for the simulation to be regarded as a
success.</p>
<p>MIN_REALIZATIONS can also be used in combination with
STOP_LONG_RUNNING, see the documentation for STOP_LONG_RUNNING
for a description of this.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_REALIZATIONS</span>  <span class="mi">20</span>
</pre></div>
</div>
<p>The MIN_REALIZATIONS key can also be set as a percentage of
NUM_REALIZATIONS</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MIN_REALIZATIONS</span>  <span class="mi">10</span><span class="o">%</span>
</pre></div>
</div>
<p>The MIN_REALIZATIONS key is optional, but if it has not been
set <em>all</em> the realisations must succeed.</p>
</div>
<div class="topic" id="stop-long-running">
<p class="topic-title first">STOP_LONG_RUNNING</p>
<p>The STOP_LONG_RUNNING key is used in combination with the MIN_REALIZATIONS key
to control the runtime of simulations. When STOP_LONG_RUNNING is set to TRUE,
MIN_REALIZATIONS is the minimum number of realizations run before the
simulation is stopped. After MIN_REALIZATIONS have succeded successfully, the
realizatons left are allowed to run for 25% of the average runtime for
successfull realizations, and then killed.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Stop</span> <span class="n">long</span> <span class="n">running</span> <span class="n">realizations</span> <span class="n">after</span> <span class="mi">20</span> <span class="n">realizations</span> <span class="n">have</span> <span class="n">succeeded</span>
<span class="n">MIN_REALIZATIONS</span>  <span class="mi">20</span>
<span class="n">STOP_LONG_RUNNING</span> <span class="n">TRUE</span>
</pre></div>
</div>
<p>The STOP_LONG_RUNNING key is optional. The MIN_REALIZATIONS key must be set
when STOP_LONG_RUNNING is set to TRUE.</p>
</div>
<div class="topic" id="max-runtime">
<p class="topic-title first">MAX_RUNTIME</p>
<p>The MAX_RUNTIME keyword is used to control the runtime of simulations. When
MAX_RUNTIME is set, a job is only allowed to run for MAX_RUNTIME, given in
seconds. A value of 0 means unlimited runtime.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Let</span> <span class="n">each</span> <span class="n">realizations</span> <span class="n">run</span> <span class="k">for</span> <span class="mi">50</span> <span class="n">seconds</span>
<span class="n">MAX_RUNTIME</span> <span class="mi">50</span>
</pre></div>
</div>
<p>The MAX_RUNTIME key is optional.</p>
</div>
</div>
<div class="section" id="parameterization-keywords">
<h2>Parameterization keywords<a class="headerlink" href="#parameterization-keywords" title="Permalink to this headline">¶</a></h2>
<p id="id4">The keywords in this section are used to define a parametrization of the ECLIPSE
model. I.e., defining which parameters to change in a sensitivity analysis
and/or history matching project. For some parameters, it necessary to specify a
prior distribution. See Prior distributions available in enkf for a complete
list of available priors.</p>
<div class="topic" id="field">
<p class="topic-title first">FIELD</p>
<p>The FIELD keyword is used to parametrize quantities which have extent over the
full grid. Both dynamic properties like pressure, and static properties like
porosity, are implemented in terms of FIELD objects. When adding fields in the
config file the syntax is a bit different for dynamic fields (typically
solution data from ECLIPSE) and parameter fields like permeability and
porosity.</p>
<p><strong>Dynamic fields</strong></p>
<p>To add a dynamic field the entry in the configuration file looks like this:</p>
<dl class="docutils">
<dt>::</dt>
<dd>FIELD   &lt;ID&gt;   DYNAMIC  MIN:X  MAX:Y</dd>
</dl>
<p>In this case ID is not an arbitrary string; it must coincide with the keyword
name found in the ECLIPSE restart file, e.g. PRESSURE. Optionally, you can add
a minimum and/or a maximum value with MIN:X and MAX:Y.</p>
<p><em>Example A:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Adding</span> <span class="n">pressure</span> <span class="n">field</span> <span class="p">(</span><span class="n">unbounded</span><span class="p">)</span>
<span class="n">FIELD</span> <span class="n">PRESSURE</span> <span class="n">DYNAMIC</span>
</pre></div>
</div>
<p><em>Example B:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Adding</span> <span class="n">a</span> <span class="n">bounded</span> <span class="n">water</span> <span class="n">saturation</span> <span class="n">field</span>
<span class="n">FIELD</span> <span class="n">SWAT</span> <span class="n">DYNAMIC</span> <span class="n">MIN</span><span class="p">:</span><span class="mf">0.2</span> <span class="n">MAX</span><span class="p">:</span><span class="mf">0.95</span>
</pre></div>
</div>
<p><strong>Parameter fields</strong></p>
<p>A parameter field (e.g. porosity or permeability) is defined as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FIELD</span>  <span class="n">ID</span> <span class="n">PARAMETER</span>   <span class="o">&lt;</span><span class="n">ECLIPSE_FILE</span><span class="o">&gt;</span>  <span class="n">INIT_FILES</span><span class="p">:</span><span class="o">/</span><span class="n">path</span><span class="o">/%</span><span class="n">d</span>  <span class="n">MIN</span><span class="p">:</span><span class="n">X</span> <span class="n">MAX</span><span class="p">:</span><span class="n">Y</span> <span class="n">OUTPUT_TRANSFORM</span><span class="p">:</span><span class="n">FUNC</span> <span class="n">INIT_TRANSFORM</span><span class="p">:</span><span class="n">FUNC</span>
</pre></div>
</div>
<p>Here ID is again an arbitrary string, ECLIPSE_FILE is the name of the file the
enkf will export this field to when running simulations. Note that there
should be an IMPORT statement in the ECLIPSE data file corresponding to the
name given with ECLIPSE_FILE. INIT_FILES is a filename (with an embedded %d)
to load the initial field from. Can be RMS ROFF format, ECLIPSE restart format
or ECLIPSE GRDECL format.</p>
<p>The input arguments MIN, MAX, INIT_TRANSFORM and OUTPUT_TRANSFORM are all
optional. MIN and MAX are as for dynamic fields.</p>
<p>For Assisted history matching, the variables in ERT should be normally
distributed internally - the purpose of the transformations is to enable
working with normally distributed variables internally in ERT. Thus, the
optional arguments INIT_TRANSFORM:FUNC and OUTPUT_TRANSFORM:FUNC are used to
transform the user input of parameter distribution. INIT_TRANSFORM:FUNC is a
function which will be applied when they are loaded to ERT.
OUTPUT_TRANSFORM:FUNC is a function which will be applied to the field when it
is exported from ERT, and FUNC is the name of a transformation function to be
applied. The avaialble functions are listed below:</p>
<p>“POW10”       : This function will raise x to the power of 10: y = 10^x.
“TRUNC_POW10” : This function will raise x to the power of 10 - and truncate lower values at 0.001.
“LOG”         : This function will take the NATURAL logarithm of x: y = ln(x).
“LN”          : This function will take the NATURAL logarithm of x: y = ln(x).
“LOG10”       : This function will take the log10 logarithm of x: y = log10(x).
“EXP”         : This function will calculate y = exp(x).
“LN0”         : This function will calculate y = ln(x + 0.000001
“EXP0”        : This function will calculate y = exp(x) - 0.000001</p>
<p>For example, the most common scenario is that underlying log-normal
distributed permeability in RMS are transformed to normally distributted in
ERT, then you do:</p>
<p>INIT_TRANSFORM:LOG To ensure that the variables which were initially
log-normal distributed are transformed to normal distribution when they are
loaded into ert.</p>
<p>OUTPUT_TRANSFORM:EXP To ensure that the variables are reexponentiated to be
log-normal distributed before going out to Eclipse.</p>
<p>If users specify the wrong function name (e.g INIT_TRANSFORM:I_DONT_KNOW), ERT
will stop and print all the valid function names.</p>
<p>Regarding format of ECLIPSE_FILE: The default format for the parameter fields
is binary format of the same type as used in the ECLIPSE restart files. This
requires that the ECLIPSE datafile contains an IMPORT statement. The advantage
with using a binary format is that the files are smaller, and reading/writing
is faster than for plain text files. If you give the ECLIPSE_FILE with the
extension .grdecl (arbitrary case), enkf will produce ordinary .grdecl files,
which are loaded with an INCLUDE statement. This is probably what most users
are used to beforehand - but we recomend the IMPORT form.</p>
<p><strong>General fields</strong></p>
<p>In addition to dynamic and parameter field there is also a general field,
where you have fine grained control over input/output. Use of the general
field type is only relevant for advanced features. The arguments for the
general field type are as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FIELD</span>   <span class="n">ID</span>  <span class="n">GENERAL</span>    <span class="n">FILE_GENERATED_BY_ENKF</span>  <span class="n">FILE_LOADED_BY_ENKF</span>    <span class="o">&lt;</span><span class="n">OPTIONS</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The OPTIONS argument is the same as for the parameter field.</p>
</div>
<div class="topic" id="gen-data">
<p class="topic-title first">GEN_DATA</p>
<blockquote>
<div><blockquote>
<div><p>The GEN_DATA keyword is used when estimating data types which enkf does not
know anything about. GEN_DATA is very similar to GEN_PARAM, but GEN_DATA is
used for data which are updated/created by the forward model like e.g. seismic
data. In the main configuration file the input for a GEN_DATA instance is as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_DATA</span>  <span class="n">ID</span> <span class="n">RESULT_FILE</span><span class="p">:</span><span class="n">yyy</span> <span class="n">INPUT_FORMAT</span><span class="p">:</span><span class="n">xx</span>  <span class="n">REPORT_STEPS</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span>  <span class="n">ECL_FILE</span><span class="p">:</span><span class="n">xxx</span>  <span class="n">OUTPUT_FORMAT</span><span class="p">:</span><span class="n">xx</span>  <span class="n">INIT_FILES</span><span class="p">:</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">files</span><span class="o">%</span><span class="n">d</span> <span class="n">TEMPLATE</span><span class="p">:</span><span class="o">/</span><span class="n">template_file</span> <span class="n">TEMPLATE_KEY</span><span class="p">:</span><span class="n">magic_string</span>
</pre></div>
</div>
<p>The GEN_DATA keyword has many options; in many cases you can leave many of
them off. We therefor list the required and the optional options separately:</p>
<p><strong>Required GEN_DATA options</strong></p>
<ul class="simple">
<li>RESULT_FILE - This if the name the file generated by the forward model and</li>
</ul>
</div></blockquote>
<p>read by ERT. This filename _must_ have a %d as part of the name, that %d
will be replaced by report step when loading.</p>
<blockquote>
<div><ul class="simple">
<li>INPUT_FORMAT - The format of the file written by the forward model (i.e.</li>
</ul>
</div></blockquote>
<p>RESULT_FILE) and read by ERT, valid values are ASCII, BINARY_DOUBLE and
BINARY_FLOAT.</p>
<blockquote>
<div><ul class="simple">
<li>REPORT_STEPS A list of the report step(s) where you expect the forward model</li>
</ul>
</div></blockquote>
<p>to create a result file. I.e. if the forward model should create a result
file for report steps 50 and 100 this setting should be:
REPORT_STEPS:50,100. If you have observations of this GEN_DATA data the
RESTART setting of the corresponding GENERAL_OBSERVATION must match one of
the values given by REPORT_STEPS.</p>
<blockquote>
<div><p><strong>Optional GEN_DATA options</strong></p>
<ul class="simple">
<li>ECL_FILE - This is the name of file written by enkf to be read by the</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>forward model.</dt>
<dd><ul class="first last simple">
<li>OUTPUT_FORMAT - The format of the files written by enkf and read by the</li>
</ul>
</dd>
</dl>
<p>forward model, valid values are ASCII, BINARY_DOUBLE, BINARY_FLOAT and
ASCII_TEMPLATE. If you use ASCII_TEMPLATE you must also supply values for
TEMPLATE and TEMPLATE_KEY.</p>
<blockquote>
<div><ul class="simple">
<li>INIT_FILES - Format string with ‘%d’ of files to load the initial data from.</li>
</ul>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_DATA</span> <span class="mi">4</span><span class="n">DWOC</span>  <span class="n">INPUT_FORMAT</span><span class="p">:</span><span class="n">ASCII</span>   <span class="n">RESULT_FILE</span><span class="p">:</span><span class="n">SimulatedWOC</span><span class="o">%</span><span class="n">d</span><span class="o">.</span><span class="n">txt</span>   <span class="n">REPORT_STEPS</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span>
</pre></div>
</div>
<p>Here we introduce a GEN_DATA instance with name 4DWOC. When the forward model
has run it should create two files with name SimulatedWOC10.txt and
SimulatedWOC100.txt. The result files are in ASCII format, ERT will look for
these files and load the content. The files should be pure numbers - without
any header.</p>
<p><a href="#id5"><span class="problematic" id="id6">**</span></a>Observe that the GEN_DATA RESULT_FILE setting must have a %d format</p>
</div></blockquote>
</div></blockquote>
<p>specifier, that will be replaced with the report step..**</p>
</div>
<div class="topic" id="custom-kw">
<p class="topic-title first">CUSTOM_KW</p>
<p>The keyword CUSTOM_KW enables custom data key:value pairs
to be stored in ERT storage.  Custom KW has many
similarities to Gen KW and Gen Data but is fully defined by
the user and contain only key_value pairs.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CUSTOM_KW</span> <span class="n">GROUP_NAME</span> <span class="o">&lt;</span><span class="n">input_file</span><span class="o">&gt;</span>

<span class="o">--</span><span class="n">GROUP_NAME</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">similar</span> <span class="n">to</span> <span class="n">Gen</span> <span class="n">KW</span> <span class="n">where</span> <span class="n">every</span> <span class="n">keyword</span> <span class="ow">is</span> <span class="n">prefixed</span> <span class="k">with</span> <span class="n">the</span> <span class="n">GROUP_NAME</span> <span class="n">like</span> <span class="n">this</span><span class="p">:</span> <span class="n">GROUP_NAME</span><span class="p">:</span><span class="n">KEYWORD</span>

<span class="o">--</span><span class="n">input_file</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="nb">input</span> <span class="n">file</span> <span class="n">expected</span> <span class="n">to</span> <span class="n">be</span> <span class="n">generated</span> <span class="n">by</span> <span class="n">a</span> <span class="n">forward</span> <span class="n">model</span><span class="o">.</span>

<span class="o">--</span><span class="n">Example</span>
<span class="n">CUSTOM_KW</span> <span class="n">COMPOSITION</span> <span class="n">composition</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>With this setup ERT will expect the file composition.txt to be present in the runpath.
This file may look like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">oil</span> <span class="mf">0.5</span>
<span class="n">water</span> <span class="mf">0.2</span>
<span class="n">gas</span> <span class="mf">0.2</span>
<span class="n">unknown</span> <span class="mf">0.1</span>
<span class="n">state</span> <span class="n">good</span>
</pre></div>
</div>
<p>Every key-value pair must be a string followed by a space and a value.
The value can either be a number or a string (all numbers are interpreted as floats).</p>
<p>After a successful run, ERT will store the COMPOSITION
Custom KW in its filesystem and will be available for every
realization.  An export will present the values produced as:</p>
<ul class="simple">
<li>COMPOSITION:oil</li>
<li>COMPOSITION:water</li>
<li>COMPOSITION:gas</li>
<li>COMPOSITION:unknown</li>
<li>COMPOSITION:state</li>
</ul>
</div>
<div class="topic" id="gen-kw">
<p class="topic-title first">GEN_KW</p>
<p>The GEN_KW (abbreviation of general keyword) parameter is based on a template
file and substitution. In the main config file a GEN_KW instance is defined as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span>  <span class="n">ID</span>  <span class="n">my_template</span><span class="o">.</span><span class="n">txt</span>  <span class="n">my_eclipse_include</span><span class="o">.</span><span class="n">txt</span>  <span class="n">my_priors</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Here ID is an (arbitrary) unique string, my_template.txt is the name of a
template file, my_eclipse_include.txt is the name of the file which is made
for each member based on my_template.txt and my_priors.txt is a file
containing a list of parametrized keywords and a prior distribution for each.
Note that you must manually edit the ECLIPSE data file so that
my_eclipse_include.txt is included.</p>
<p>Let us consider an example where the GEN_KW parameter type is used to estimate
pore volume multipliers. We would then declare a GEN_KW instance in the main
enkf configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span> <span class="n">PAR_MULTPV</span> <span class="n">multpv_template</span><span class="o">.</span><span class="n">txt</span> <span class="n">multpv</span><span class="o">.</span><span class="n">txt</span> <span class="n">multpv_priors</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>In the GRID or EDIT section of the ECLIPSE data file, we would insert the
following include statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INCLUDE</span>
 <span class="s1">&#39;multpv.txt&#39;</span> <span class="o">/</span>
</pre></div>
</div>
<p>The template file multpv_template.txt would contain some parametrized ECLIPSE
statements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BOX</span>
 <span class="mi">1</span> <span class="mi">10</span> <span class="mi">1</span> <span class="mi">30</span> <span class="mi">13</span> <span class="mi">13</span> <span class="o">/</span>
<span class="n">MULTPV</span>
 <span class="mi">300</span><span class="o">*&lt;</span><span class="n">MULTPV_BOX1</span><span class="o">&gt;</span> <span class="o">/</span>
<span class="n">ENDBOX</span>

<span class="n">BOX</span>
 <span class="mi">1</span> <span class="mi">10</span> <span class="mi">1</span> <span class="mi">30</span> <span class="mi">14</span> <span class="mi">14</span> <span class="o">/</span>
<span class="n">MULTPV</span>
 <span class="mi">300</span><span class="o">*&lt;</span><span class="n">MULTPV_BOX2</span><span class="o">&gt;</span> <span class="o">/</span>
<span class="n">ENDBOX</span>
</pre></div>
</div>
<p>Here, &lt;MULTPV_BOX1&gt; and &lt;MULTPV_BOX2&gt; will act as magic strings. Note that the
‘&lt;’ ‘&gt;’ must be present around the magic strings. In this case, the parameter
configuration file multpv_priors.txt could look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MULTPV_BOX2</span> <span class="n">UNIFORM</span> <span class="mf">0.98</span> <span class="mf">1.03</span>
<span class="n">MULTPV_BOX1</span> <span class="n">UNIFORM</span> <span class="mf">0.85</span> <span class="mf">1.00</span>
</pre></div>
</div>
<p>In general, the first keyword on each line in the parameter configuration file
defines a key, which when found in the template file enclosed in ‘&lt;’ and ‘&gt;’,
is replaced with a value. The rest of the line defines a prior distribution
for the key. See Prior distributions available in enkf for a list of available
prior distributions.</p>
<p><strong>Example: Using GEN_KW to estimate fault transmissibility multipliers</strong></p>
<p>Previously enkf supported a datatype MULTFLT for estimating fault
transmissibility multipliers. This has now been depreceated, as the
functionality can be easily achieved with the help of GEN_KW. In th enkf
config file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span>  <span class="n">MY</span><span class="o">-</span><span class="n">FAULTS</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">tmpl</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">INC</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Here MY-FAULTS is the (arbitrary) key assigned to the fault multiplers,
MULTFLT.tmpl is the template file, which can look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MULTFLT</span>
 <span class="s1">&#39;FAULT1&#39;</span>   <span class="o">&lt;</span><span class="n">FAULT1</span><span class="o">&gt;</span>  <span class="o">/</span>
 <span class="s1">&#39;FAULT2&#39;</span>   <span class="o">&lt;</span><span class="n">FAULT2</span><span class="o">&gt;</span>  <span class="o">/</span>
<span class="o">/</span>
</pre></div>
</div>
<p>and finally the initial distribution of the parameters FAULT1 and FAULT2 are
defined in the file MULTFLT.txt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAULT1</span>   <span class="n">LOGUNIF</span>   <span class="mf">0.00001</span>   <span class="mf">0.1</span>
<span class="n">FAULT2</span>   <span class="n">UNIFORM</span>   <span class="mf">0.00</span>      <span class="mf">1.0</span>
</pre></div>
</div>
<p>The various prior distributions available for the <code class="docutils literal notranslate"><span class="pre">GEN_KW</span></code>
keyword are here <span class="xref std std-ref">prior distributions available in ERT</span></p>
<p>Loading GEN_KW values from an external file</p>
<p>The default use of the GEN_KW keyword is to let the ERT application sample
random values for the elements in the GEN_KW instance, but it is also possible
to tell ERT to load a precreated set of data files, this can for instance be
used as a component in a experimental design based workflow. When using
external files to initialize the GEN_KW instances you supply an extra keyword
<code class="docutils literal notranslate"><span class="pre">INIT_FILE:/path/to/priors/files%d</span></code> which tells where the prior files are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_KW</span>  <span class="n">MY</span><span class="o">-</span><span class="n">FAULTS</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">tmpl</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">INC</span>   <span class="n">MULTFLT</span><span class="o">.</span><span class="n">txt</span>    <span class="n">INIT_FILES</span><span class="p">:</span><span class="n">priors</span><span class="o">/</span><span class="n">multflt</span><span class="o">/</span><span class="n">faults</span><span class="o">%</span><span class="n">d</span>
</pre></div>
</div>
<p>In the example above you must prepare files priors/multflt/faults0,
priors/multflt/faults1, … priors/multflt/faultsn which ert will load when
you initialize the case. The format of the GEN_KW input files can be of two
varieties:</p>
<ol class="arabic simple">
<li>The files can be plain ASCII text files with a list of numbers:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1.25</span>
<span class="mf">2.67</span>
</pre></div>
</div>
<p>The numbers will be assigned to parameters in the order found in the
MULTFLT.txt file.</p>
<ol class="arabic simple" start="2">
<li>Alternatively values and keywords can be interleaved as in:</li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FAULT1</span> <span class="mf">1.25</span>
<span class="n">FAULT2</span> <span class="mf">2.56</span>
</pre></div>
</div>
<p>in this case the ordering can differ in the init files and the parameter file.</p>
<p>The heritage of the ERT program is based on the EnKF algorithm, and the EnKF
algorithm evolves around Gaussian variables - internally the GEN_KW variables
are assumed to be samples from the N(0,1) distribution, and the distributions
specified in the parameters file are based on transformations starting with a
N(0,1) distributed variable. The slightly awkward consequence of this is that
to let your sampled values pass through ERT unmodified you must configure the
distribution NORMAL 0 1 in the parameter file; alternatively if you do not
intend to update the GEN_KW variable you can use the distribution RAW.</p>
</div>
<div class="topic" id="gen-param">
<p class="topic-title first">GEN_PARAM</p>
<blockquote>
<div><blockquote>
<div><p>The GEN_PARAM parameter type is used to estimate parameters which do not
really fit into any of the other categories. As an example, consider the
following situation:</p>
<p>Some external Software (e.g. Cohiba) makes a large vector of random numbers
which will serve as input to the forward model. (It is no requirement that the
parameter set is large, but if it only consists of a few parameters the GEN_KW
type will be easier to use.) We want to update this parameter with enkf. In
the main configuration file the input for a GEN_PARAM instance is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GEN_PARAM</span>  <span class="n">ID</span>  <span class="n">ECLIPSE_FILE</span>  <span class="n">INPUT_FORMAT</span><span class="p">:</span><span class="n">xx</span>  <span class="n">OUTPUT_FORMAT</span><span class="p">:</span><span class="n">xx</span>  <span class="n">INIT_FILES</span><span class="p">:</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">init</span><span class="o">/</span><span class="n">files</span><span class="o">%</span><span class="n">d</span> <span class="p">(</span><span class="n">TEMPLATE</span><span class="p">:</span><span class="o">/</span><span class="n">template_file</span> <span class="n">KEY</span><span class="p">:</span><span class="n">magic_string</span><span class="p">)</span>
</pre></div>
</div>
<p>here ID is the usual unique string identifying this instance and ECLIPSE_FILE
is the name of the file which is written into the run directories. The three
arguments GEN_PARAM, ID and ECLIPSE_FILE must be the three first arguments. In
addition you must have three additional arguments, INPUT_FORMAT, OUTPUT_FORMAT
and INIT_FILES. INPUT_FORMAT is the format of the files enkf should load to
initialize, and OUTPUT_FORMAT is the format of the files enkf writes for the
forward model. The valid values are:</p>
<ul class="simple">
<li>ASCII - This is just text file with formatted numbers.</li>
<li>ASCII_TEMPLATE - An plain text file with formatted numbers, and an arbitrary</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>header/footer.</dt>
<dd><blockquote class="first">
<div><ul class="simple">
<li>BINARY_FLOAT - A vector of binary float numbers.</li>
<li>BINARY_DOUBLE - A vector of binary double numbers.</li>
</ul>
<p>Regarding the different formats - observe the following:</p>
<ol class="arabic simple">
<li>Except the format ASCII_TEMPLATE the files contain no header information.</li>
<li>The format ASCII_TEMPLATE can only be used as output format.</li>
<li>If you use the output format ASCII_TEMPLATE you must also supply a</li>
</ol>
</div></blockquote>
<dl class="docutils">
<dt>TEMPLATE:X and KEY:Y option. See documentation of this below.</dt>
<dd><ol class="first last arabic simple">
<li>For the binary formats files generated by Fortran can not be used - can</li>
</ol>
</dd>
</dl>
<p>easily be supported on request.</p>
<blockquote class="last">
<div><strong>Regarding templates:</strong> If you use OUTPUT_FORMAT:ASCII_TEMPLATE you must also</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p>supply the arguments TEMPLATE:/template/file and KEY:MaGiCKEY. The template
file is an arbitrary existing text file, and KEY is a magic string found in
this file. When enkf is running the magic string is replaced with parameter
data when the ECLIPSE_FILE is written to the directory where the simulation
is run from. Consider for example the follwing configuration:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TEMPLATE</span><span class="p">:</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">file</span>   <span class="n">KEY</span><span class="p">:</span><span class="n">Magic123</span>
</pre></div>
</div>
<p>The template file can look like this (only the Magic123 is special):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Header</span> <span class="n">line1</span>
<span class="n">Header</span> <span class="n">line2</span>
<span class="o">============</span>
<span class="n">Magic123</span>
<span class="o">============</span>
<span class="n">Footer</span> <span class="n">line1</span>
<span class="n">Footer</span> <span class="n">line2</span>
</pre></div>
</div>
<p>When enkf is running the string Magic123 is replaced with parameter values,
and the resulting file will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Header</span> <span class="n">line1</span>
<span class="n">Header</span> <span class="n">line2</span>
<span class="o">============</span>
<span class="mf">1.6723</span>
<span class="mf">5.9731</span>
<span class="mf">4.8881</span>
<span class="o">.....</span>
<span class="o">============</span>
<span class="n">Footer</span> <span class="n">line1</span>
<span class="n">Footer</span> <span class="n">line2</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="topic" id="surface">
<p class="topic-title first">SURFACE</p>
<blockquote>
<div><p>The SURFACE keyword can be used to work with surface from RMS in the irap
format. The surface keyword is configured like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SURFACE</span> <span class="n">TOP</span>   <span class="n">OUTPUT_FILE</span><span class="p">:</span><span class="n">surf</span><span class="o">.</span><span class="n">irap</span>   <span class="n">INIT_FILES</span><span class="p">:</span><span class="n">Surfaces</span><span class="o">/</span><span class="n">surf</span><span class="o">%</span><span class="n">d</span><span class="o">.</span><span class="n">irap</span>   <span class="n">BASE_SURFACE</span><span class="p">:</span><span class="n">Surfaces</span><span class="o">/</span><span class="n">surf0</span><span class="o">.</span><span class="n">irap</span>
</pre></div>
</div>
<p>The first argument, TOP in the example above, is the identifier you want to
use for this surface in ert. The OUTPUT_FILE key is the name of surface file
which ERT will generate for you, INIT_FILES points to a list of files which
are used to initialize, and BASE_SURFACE must point to one existing surface
file. When loading the surfaces ERT will check that all the headers are
compatible. An example of a surface IRAP file is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="mi">996</span>   <span class="mi">511</span>     <span class="mf">50.000000</span>     <span class="mf">50.000000</span>
<span class="mf">444229.9688</span>   <span class="mf">457179.9688</span>  <span class="mf">6809537.0000</span>  <span class="mf">6835037.0000</span>
<span class="mi">260</span>      <span class="o">-</span><span class="mf">30.0000</span>   <span class="mf">444229.9688</span>  <span class="mf">6809537.0000</span>
<span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>     <span class="mi">0</span>
<span class="mf">2735.7461</span>    <span class="mf">2734.8909</span>    <span class="mf">2736.9705</span>    <span class="mf">2737.4048</span>    <span class="mf">2736.2539</span>    <span class="mf">2737.0122</span>
<span class="mf">2740.2644</span>    <span class="mf">2738.4014</span>    <span class="mf">2735.3770</span>    <span class="mf">2735.7327</span>    <span class="mf">2733.4944</span>    <span class="mf">2731.6448</span>
<span class="mf">2731.5454</span>    <span class="mf">2731.4810</span>    <span class="mf">2730.4644</span>    <span class="mf">2730.5591</span>    <span class="mf">2729.8997</span>    <span class="mf">2726.2217</span>
<span class="mf">2721.0996</span>    <span class="mf">2716.5913</span>    <span class="mf">2711.4338</span>    <span class="mf">2707.7791</span>    <span class="mf">2705.4504</span>    <span class="mf">2701.9187</span>
<span class="o">....</span>
</pre></div>
</div>
<p>The surface data will typically be fed into other programs like Cohiba or RMS.
The data can be updated using e.g. the Smoother.</p>
<p><strong>Initializing from the FORWARD MODEL</strong></p>
<p>All the parameter types like FIELD,GEN_KW,GEN_PARAM and SURFACE can be
initialized from the forward model. To achieve this you just add the setting
FORWARD_INIT:True to the configuration. When using forward init the
initialization will work like this:</p>
<ol class="arabic simple">
<li>The explicit initialization from the case menu, or when you start a</li>
</ol>
</div></blockquote>
<dl class="docutils">
<dt>simulation, will be ignored.</dt>
<dd><ol class="first last arabic simple">
<li>When the FORWARD_MODEL is complete ERT will try to initialize the node</li>
</ol>
</dd>
</dl>
<p>based on files created by the forward model. If the init fails the job as a
whole will fail.</p>
<blockquote>
<div><ol class="arabic simple">
<li>If a node has been initialized, it will not be initialized again if you run</li>
</ol>
</div></blockquote>
<p>again. [Should be possible to force this ….]</p>
<blockquote>
<div><p>When using FORWARD_INIT:True ERT will consider the INIT_FILES setting to find
which file to initialize from. If the INIT_FILES setting contains a relative
filename, it will be interpreted relativt to the runpath directory. In the
example below we assume that RMS has created a file petro.grdecl which
contains both the PERMX and the PORO fields in grdecl format; we wish to
initialize PERMX and PORO nodes from these files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FIELD</span>   <span class="n">PORO</span>  <span class="n">PARAMETER</span>    <span class="n">poro</span><span class="o">.</span><span class="n">grdecl</span>     <span class="n">INIT_FILES</span><span class="p">:</span><span class="n">petro</span><span class="o">.</span><span class="n">grdecl</span>  <span class="n">FORWARD_INIT</span><span class="p">:</span><span class="kc">True</span>
<span class="n">FIELD</span>   <span class="n">PERMX</span> <span class="n">PARAMETER</span>    <span class="n">permx</span><span class="o">.</span><span class="n">grdecl</span>    <span class="n">INIT_FILES</span><span class="p">:</span><span class="n">petro</span><span class="o">.</span><span class="n">grdecl</span>  <span class="n">FORWARD_INIT</span><span class="p">:</span><span class="kc">True</span>
</pre></div>
</div>
<p>Observe that forward model has created the file petro.grdecl and the nodes
PORO and PERMX create the ECLIPSE input files poro.grdecl and permx.grdecl, to
ensure that ECLIPSE finds the input files poro.grdecl and permx.grdecl the
forward model should contain a job which will copy/convert petro.grdecl -&gt;
(poro.grdecl,permx.grdecl), this job should not overwrite existing versions of
permx.grdecl and poro.grdecl. This extra hoops is not strictly needed in all
cases, but strongly recommended to ensure that you have control over which
data is used, and that everything is consistent in the case where the forward
model is run again.</p>
</div></blockquote>
</div>
<div class="topic" id="summary">
<p class="topic-title first">SUMMARY</p>
<p>The SUMMARY keyword is used to add variables from the ECLIPSE summary file to
the parametrization. The keyword expects a string, which should have the
format VAR:WGRNAME. Here, VAR should be a quantity, such as WOPR, WGOR, RPR or
GWCT. Moreover, WGRNAME should refer to a well, group or region. If it is a
field property, such as FOPT, WGRNAME need not be set to FIELD.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Using</span> <span class="n">the</span> <span class="n">SUMMARY</span> <span class="n">keyword</span> <span class="n">to</span> <span class="n">add</span> <span class="n">diagnostic</span> <span class="n">variables</span>
<span class="n">SUMMARY</span> <span class="n">WOPR</span><span class="p">:</span><span class="n">MY_WELL</span>
<span class="n">SUMMARY</span> <span class="n">RPR</span><span class="p">:</span><span class="mi">8</span>
<span class="n">SUMMARY</span> <span class="n">F</span><span class="o">*</span>          <span class="o">--</span> <span class="n">Use</span> <span class="n">of</span> <span class="n">wildcards</span> <span class="n">requires</span> <span class="n">that</span> <span class="n">you</span> <span class="n">have</span> <span class="n">entered</span> <span class="n">a</span> <span class="n">REFCASE</span><span class="o">.</span>
</pre></div>
</div>
<p>The SUMMARY keyword has limited support for ‘*’ wildcards, if your key
contains one or more ‘*’ characters all matching variables from the refcase
are selected. Observe that if your summary key contains wildcards you must
supply a refcase with the REFCASE key - otherwise it will fail hard.</p>
<p><strong>Note:</strong> Properties added using the SUMMARY keyword are only diagnostic. I.e., they have no effect on the sensitivity analysis or history match.</p>
</div>
</div>
<div class="section" id="keywords-controlling-the-es-algorithm">
<h2>Keywords controlling the ES algorithm<a class="headerlink" href="#keywords-controlling-the-es-algorithm" title="Permalink to this headline">¶</a></h2>
<p>See the sub keyword <code class="code docutils literal notranslate"><span class="pre">OVERLAP_LIMIT</span></code> under the :code:<a href="#id8"><span class="problematic" id="id9">`</span></a>UPDATE_SETTINGS`keyword.</p>
<div class="topic" id="enkf-bootstrap">
<p class="topic-title first">ENKF_BOOTSTRAP</p>
<p>Boolean specifying if we want to resample the Kalman gain matrix in the update
step. The purpose is to avoid that the ensemble covariance collapses. When
this keyword is true each ensemble member will be updated based on a Kalman
gain matrix estimated from a resampling with replacement of the full ensemble.</p>
<p>In theory and in practice this has worked well when one uses a small number of
ensemble members.</p>
</div>
<div class="topic" id="enkf-cv-folds">
<p class="topic-title first">ENKF_CV_FOLDS</p>
<p>Integer specifying how many folds we should use in the Cross-Validation (CV)
scheme. Possible choices are the integers between 2 and the ensemble size
(2-fold CV and leave-one-out CV respectively). However, a robust choice for
the number of CV-folds is 5 or 10 (depending on the ensemble size).</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Setting</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">CV</span> <span class="n">folds</span> <span class="n">equal</span> <span class="n">to</span> <span class="mi">5</span>
<span class="n">ENKF_CV_FOLDS</span> <span class="mi">5</span>
</pre></div>
</div>
<p>Requires that the ENKF_LOCAL_CV keyword is set to TRUE</p>
</div>
<div class="topic" id="enkf-force-ncomp">
<p class="topic-title first">ENKF_FORCE_NCOMP</p>
<p>Bool specifying if we want to force the subspace dimension we want to use in
the EnKF updating scheme (SVD-based) to a specific integer. This is an
alternative to selecting the dimension using ENKF_TRUNCATION or ENKF_LOCAL_CV.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Setting</span> <span class="n">the</span> <span class="n">the</span> <span class="n">subspace</span> <span class="n">dimension</span> <span class="n">to</span> <span class="mi">2</span>
<span class="n">ENKF_FORCE_NCOMP</span>     <span class="n">TRUE</span>
<span class="n">ENKF_NCOMP</span>              <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="topic" id="enkf-local-cv">
<p class="topic-title first">ENKF_LOCAL_CV</p>
<p>Boolean specifying if we want to select the subspace dimension in the
SVD-based EnKF algorithm using Cross-Validation (CV) [1]. This is a more
robust alternative to selecting the subspace dimension based on the estimated
singular values (See ENKF_TRUNCATION), because the predictive power of the
estimated Kalman gain matrix is taken into account.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Select</span> <span class="n">the</span> <span class="n">subspace</span> <span class="n">dimension</span> <span class="n">using</span> <span class="n">Cross</span><span class="o">-</span><span class="n">Validation</span>
<span class="n">ENKF_LOCAL_CV</span> <span class="n">TRUE</span>
</pre></div>
</div>
</div>
<div class="topic" id="enkf-pen-press">
<p class="topic-title first">ENKF_PEN_PRESS</p>
<p>Boolean specifying if we want to select the subspace dimension in the
SVD-based EnKF algorithm using Cross-Validation (CV), and a penalised version
of the predictive error sum of squares (PRESS) statistic [2]. This is
recommended when overfitting is a severe problem (and when the number of
ensemble members is small)</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Select</span> <span class="n">the</span> <span class="n">subspace</span> <span class="n">dimension</span> <span class="n">using</span> <span class="n">Cross</span><span class="o">-</span><span class="n">Validation</span>
<span class="n">ENKF_LOCAL_CV</span> <span class="n">TRUE</span>

<span class="o">--</span> <span class="n">Using</span> <span class="n">penalised</span> <span class="n">PRESS</span> <span class="n">statistic</span>
<span class="n">ENKF_PEN_PRESS</span> <span class="n">TRUE</span>
</pre></div>
</div>
</div>
<div class="topic" id="enkf-mode">
<p class="topic-title first">ENKF_MODE</p>
<p>The ENKF_MODE keyword is used to select which EnKF algorithm to use. Use the
value STANDARD for the original EnKF algorithm, or SQRT for the so-called
square root scheme. The default value for ENKF_MODE is STANDARD.</p>
<p><em>Example A:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Using</span> <span class="n">the</span> <span class="n">square</span> <span class="n">root</span> <span class="n">update</span>
<span class="n">ENKF_MODE</span> <span class="n">SQRT</span>
</pre></div>
</div>
<p><em>Example B:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Using</span> <span class="n">the</span> <span class="n">standard</span> <span class="n">update</span>
<span class="n">ENKF_MODE</span> <span class="n">STANDARD</span>
</pre></div>
</div>
<p>The ENKF_MODE keyword is optional.</p>
</div>
<div class="topic" id="enkf-merge-observations">
<p class="topic-title first">ENKF_MERGE_OBSERVATIONS</p>
<p>If you use the ENKF_SCHED_FILE option to jump over several dates at a time you
can choose whether you want to use all the observations in between, or just
the final. If set to TRUE, all observations will be used. If set to FALSE,
only the final observation is used. The default value for
ENKF_MERGE_OBSERVATIONS is FALSE.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Merge</span> <span class="n">observations</span>
<span class="n">ENKF_MERGE_OBSERVATIONS</span> <span class="n">TRUE</span>
</pre></div>
</div>
</div>
<div class="topic" id="enkf-ncomp">
<p class="topic-title first">ENKF_NCOMP</p>
<p>Integer specifying the subspace dimension. Requires that ENKF_FORCE_NCOMP is
TRUE.</p>
</div>
<div class="topic" id="enkf-rerun">
<p class="topic-title first">ENKF_RERUN</p>
<p>This is a boolean switch - TRUE or FALSE. Should the simulation start from
time zero after each update.</p>
</div>
<div class="topic" id="enkf-scaling">
<p class="topic-title first">ENKF_SCALING</p>
<p>This is a boolean switch - TRUE (Default) or FALSE. If TRUE, we scale the data
ensemble matrix to unit variance. This is generally recommended because the
SVD-based EnKF algorithm is not scale invariant.</p>
</div>
<div class="topic" id="enkf-truncation">
<p class="topic-title first">ENKF_TRUNCATION</p>
<p>Truncation factor for the SVD-based EnKF algorithm (see Evensen, 2007). In
this algorithm, the forecasted data will be projected into a low dimensional
subspace before assimilation. This can substantially improve on the results
obtained with the EnKF, especially if the data ensemble matrix is highly
collinear (Saetrom and Omre, 2010). The subspace dimension, p, is selected
such that</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">frac</span><span class="p">{</span>\<span class="n">sum_</span><span class="p">{</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">}</span><span class="o">^</span><span class="p">{</span><span class="n">p</span><span class="p">}</span> <span class="n">s_i</span><span class="o">^</span><span class="mi">2</span><span class="p">}{</span>\<span class="n">sum_</span><span class="p">{</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">}</span><span class="o">^</span><span class="n">r</span> <span class="n">s_i</span><span class="o">^</span><span class="mi">2</span><span class="p">}</span> \<span class="n">geq</span> \<span class="n">mathrm</span><span class="p">{</span><span class="n">ENKF</span>\<span class="n">_TRUNCATION</span><span class="p">},</span>
</pre></div>
</div>
<p>where si is the ith singular value of the centered data ensemble matrix and r
is the rank of this matrix. This criterion is similar to the explained
variance criterion used in Principal Component Analysis (see e.g. Mardia et
al. 1979).</p>
<p>The default value of ENKF_TRUNCATION is 0.99. If ensemble collapse is a big
problem, a smaller value should be used (e.g 0.90 or smaller). However, this
does not guarantee that the problem of ensemble collapse will disappear. Note
that setting the truncation factor to 1.00, will recover the Standard-EnKF
algorithm if and only if the covariance matrix for the observation errors is
proportional to the identity matrix.</p>
</div>
<div class="topic" id="std-scale-correlated-obs">
<p class="topic-title first">STD_SCALE_CORRELATED_OBS</p>
<p>With this kewyord you can instruct ERT to use the simulated data to
estimate the correlations in the observations, and then inflate the
observation standard deviation as a way to estimate the real information
content in the observations. The method is based on PCA, the scaling
factor is calculated as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">sqrt</span><span class="p">{</span>\<span class="n">frac</span><span class="p">{</span><span class="n">N_</span><span class="p">{</span>\<span class="n">sigma</span><span class="p">}}{</span><span class="n">N_</span><span class="p">{</span>\<span class="n">mathrm</span><span class="p">{</span><span class="n">obs</span><span class="p">}}}</span>
</pre></div>
</div>
<p>where $N_{sigma}$ is the number of singular components, at (fixed)
truncation 0.95 and $N_{mathrm{obs}}$ is the number of observations.
The STD_SCALE_CORRELATED_OBS keyword will flatten all your observations,
including temporal and spatial correlations. For more fine grained
control you can use the STD_CALE_CORRELATED_OBS workflow job, or even
write your own plugins.</p>
</div>
<div class="topic" id="update-log-path">
<p class="topic-title first">UPDATE_LOG_PATH</p>
<p>A summary of the data used for updates are stored in this directory.</p>
</div>
<p><strong>References</strong></p>
<ul class="simple">
<li>Evensen, G. (2007). “Data Assimilation, the Ensemble Kalman Filter”, Springer.</li>
<li>Mardia, K. V., Kent, J. T. and Bibby, J. M. (1979). “Multivariate Analysis”, Academic Press.</li>
<li>Saetrom, J. and Omre, H. (2010). “Ensemble Kalman filtering with shrinkage regression techniques”, Computational Geosciences (online first).</li>
</ul>
</div>
<div class="section" id="analysis-module">
<h2>Analysis module<a class="headerlink" href="#analysis-module" title="Permalink to this headline">¶</a></h2>
<p id="id10">The final EnKF linear algebra is performed in an analysis module. The keywords
to load, select and modify the analysis modules are documented here.</p>
<div class="topic" id="analysis-load">
<p class="topic-title first">ANALYSIS_LOAD</p>
<p>The ANALYSIS_LOAD key is the main key to load an analysis module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ANALYSIS_LOAD</span> <span class="n">ANAME</span>  <span class="n">analysis</span><span class="o">.</span><span class="n">so</span>
</pre></div>
</div>
<p>The first argument ANAME is just an arbitrary unique name which you want to
use to refer to the module later. The second argument is the name of the
shared library file implementing the module, this can either be an absolute
path as /path/to/my/module/ana.so or a relative file name as analysis.so. The
module is loaded with dlopen() and the normal shared library search semantics
applies.</p>
</div>
<div class="topic" id="analysis-select">
<p class="topic-title first">ANALYSIS_SELECT</p>
<p>This command is used to select which analysis module to actually use in the
updates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ANALYSIS_SELECT</span> <span class="n">ANAME</span>
</pre></div>
</div>
<p>Here ANAME is the name you have assigned to the module when loading it with
ANALYSIS_LOAD.</p>
</div>
<div class="topic" id="analysis-set-var">
<p class="topic-title first">ANALYSIS_SET_VAR</p>
<p>The analysis modules can have internal state, like e.g. truncation cutoff
values, these values can be manipulated from the config file using the
ANALYSIS_SET_VAR keyword:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ANALYSIS_SET_VAR</span>  <span class="n">ANAME</span>  <span class="n">ENKF_TRUNCATION</span>  <span class="mf">0.97</span>
</pre></div>
</div>
<p>To use this you must know which variables the module supports setting this
way. If you try to set an unknown variable you will get an error message on
stderr.</p>
</div>
<div class="topic" id="analysis-copy">
<p class="topic-title first">ANALYSIS_COPY</p>
<p>With the ANALYSIS_COPY keyword you can create a new instance of a module. This
can be convenient if you want to run the same algorithm with the different
settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ANALYSIS_LOAD</span>   <span class="n">A1</span>  <span class="n">analysis</span><span class="o">.</span><span class="n">so</span>
<span class="n">ANALYISIS_COPY</span>  <span class="n">A1</span>  <span class="n">A2</span>
</pre></div>
</div>
<p>We load a module analysis.so and assign the name A1; then we copy A1 -&gt; A2.
The module A1 and A2 are now 100% identical. We then set the truncation to two
different values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ANALYSIS_SET_VAR</span> <span class="n">A1</span> <span class="n">ENKF_TRUNCATION</span> <span class="mf">0.95</span>
<span class="n">ANALYSIS_SET_VAR</span> <span class="n">A2</span> <span class="n">ENKF_TRUNCATION</span> <span class="mf">0.98</span>
</pre></div>
</div>
</div>
<p><strong>Developing analysis modules</strong></p>
<p>In the analysis module the update equations are formulated based on familiar
matrix expressions, and no knowledge of the innards of the ERT program are
required. Some more details of how modules work can be found here modules.txt.
In principle a module is ‘just’ a shared library following some conventions, and
if you are sufficiently savy with gcc you can build them manually, but along
with the ert installation you should have utility script ert_module which can be
used to build a module; just write ert_module without any arguments to get a
brief usage description.</p>
</div>
<div class="section" id="advanced-optional-keywords">
<h2>Advanced optional keywords<a class="headerlink" href="#advanced-optional-keywords" title="Permalink to this headline">¶</a></h2>
<p id="id11">The keywords in this section, controls advanced features of the enkf
application. Insight in the internals of the enkf application and/or ECLIPSE may
be required to fully understand their effect. Moreover, many of these keywords
are defined in the site configuration, and thus optional to set for the user,
but required when installing the enkf application at a new site.</p>
<div class="topic" id="add-fixed-length-schedule-kw">
<p class="topic-title first">ADD_FIXED_LENGTH_SCHEDULE_KW</p>
<p>Real low level fix for some SCHEDULE parsing problems.</p>
</div>
<div class="topic" id="define">
<p class="topic-title first">DEFINE</p>
<p>With the DEFINE keyword you can define key-value pairs which will be
substituted in the rest of the configuration file. The DEFINE keyword expects
two arguments: A key and a value to replace for that key. Later instances of
the key enclosed in ‘&lt;’ and ‘&gt;’ will be substituted with the value. The value
can consist of several strings, in that case they will be joined by one single
space.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Define</span> <span class="n">ECLIPSE_PATH</span> <span class="ow">and</span> <span class="n">ECLIPSE_BASE</span>
<span class="n">DEFINE</span>  <span class="n">ECLIPSE_PATH</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">eclipse</span><span class="o">/</span><span class="n">run</span>
<span class="n">DEFINE</span>  <span class="n">ECLIPSE_BASE</span>  <span class="n">STATF02</span>
<span class="n">DEFINE</span>  <span class="n">KEY</span>           <span class="n">VALUE1</span>       <span class="n">VALUE2</span> <span class="n">VALUE3</span>            <span class="n">VALUE4</span>

<span class="o">--</span> <span class="n">Set</span> <span class="n">the</span> <span class="n">GRID</span> <span class="ow">in</span> <span class="n">terms</span> <span class="n">of</span> <span class="n">the</span> <span class="n">ECLIPSE_PATH</span>
<span class="o">--</span> <span class="ow">and</span> <span class="n">ECLIPSE_BASE</span> <span class="n">keys</span><span class="o">.</span>
<span class="n">GRID</span>    <span class="o">&lt;</span><span class="n">ECLIPSE_PATH</span><span class="o">&gt;/&lt;</span><span class="n">ECLIPSE_BASE</span><span class="o">&gt;.</span><span class="n">EGRID</span>
</pre></div>
</div>
<p>Observe that when you refer to the keys later in the config file they must be
enclosed in ‘&lt;’ and ‘&gt;’. Furthermore, a key-value pair must be defined in the
config file before it can be used. The final key define above KEY, will be
replaced with VALUE1 VALUE2 VALUE3 VALUE4 - i.e. the extra spaces will be
discarded.</p>
</div>
<div class="topic" id="time-map">
<p class="topic-title first">TIME_MAP</p>
<p>Normally the mapping between report steps and true dates is inferred by
ERT indirectly by loading the ECLIPSE summary files. In cases where you
do not have any ECLIPSE summary files you can use the TIME_MAP keyword
to specify a file with dates which are used to establish this mapping:</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Load</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">dates</span> <span class="kn">from</span> <span class="nn">external</span> <span class="n">file</span><span class="p">:</span> <span class="s2">&quot;time_map.txt&quot;</span>
<span class="n">TIME_MAP</span> <span class="n">time_map</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>The format of the TIME_MAP file should just be a list of dates formatted as
dd/mm/yyyy. The example file below has four dates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">01</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">2000</span>
<span class="mi">01</span><span class="o">/</span><span class="mi">07</span><span class="o">/</span><span class="mi">2000</span>
<span class="mi">01</span><span class="o">/</span><span class="mi">01</span><span class="o">/</span><span class="mi">2001</span>
<span class="mi">01</span><span class="o">/</span><span class="mi">07</span><span class="o">/</span><span class="mi">2001</span>
</pre></div>
</div>
</div>
<div class="topic" id="schedule-prediction-file">
<p class="topic-title first">SCHEDULE_PREDICTION_FILE</p>
<p>This is the name of a schedule prediction file. It can contain %d to get
different files for different members. Observe that the ECLIPSE datafile
should include only one schedule file, even if you are doing predictions.</p>
</div>
</div>
<div class="section" id="keywords-related-to-running-the-forward-model">
<h2>Keywords related to running the forward model<a class="headerlink" href="#keywords-related-to-running-the-forward-model" title="Permalink to this headline">¶</a></h2>
<div class="topic" id="forward-model">
<span id="id12"></span><p class="topic-title first">FORWARD_MODEL</p>
<p>The FORWARD_MODEL keyword is used to define how the simulations are executed.
E.g., which version of ECLIPSE to use, which rel.perm script to run, which
rock physics model to use etc. Jobs (i.e. programs and scripts) that are to be
used in the FORWARD_MODEL keyword must be defined using the INSTALL_JOB
keyword. A set of default jobs are available, and by default FORWARD_MODEL
takes the value ECLIPSE100.</p>
<p>The FORWARD_MODEL keyword expects a series of keywords, each defined with
INSTALL_JOB. The enkf will execute the jobs in sequentially in the order they
are entered. Note that the ENKF_SCHED_FILE keyword can be used to change the
FORWARD_MODEL for sub-sequences of the run.</p>
<p><em>Example A:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Suppose</span> <span class="n">that</span> <span class="s2">&quot;MY_RELPERM_SCRIPT&quot;</span> <span class="n">has</span> <span class="n">been</span> <span class="n">defined</span> <span class="k">with</span>
<span class="o">--</span> <span class="n">the</span> <span class="n">INSTALL_JOB</span> <span class="n">keyword</span><span class="o">.</span> <span class="n">This</span> <span class="n">FORWARD_MODEL</span> <span class="n">will</span> <span class="n">execute</span>
<span class="o">--</span> <span class="s2">&quot;MY_RELPERM_SCRIPT&quot;</span> <span class="n">before</span> <span class="n">ECLIPSE100</span><span class="o">.</span>
<span class="n">FORWARD_MODEL</span> <span class="n">MY_RELPERM_SCRIPT</span> <span class="n">ECLIPSE100</span>
</pre></div>
</div>
<p><em>Example B:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Suppose</span> <span class="n">that</span> <span class="s2">&quot;MY_RELPERM_SCRIPT&quot;</span> <span class="ow">and</span> <span class="s2">&quot;MY_ROCK_PHYSICS_MODEL&quot;</span>
<span class="o">--</span> <span class="n">has</span> <span class="n">been</span> <span class="n">defined</span> <span class="k">with</span> <span class="n">the</span> <span class="n">INSTALL_JOB</span> <span class="n">keyword</span><span class="o">.</span>
<span class="o">--</span> <span class="n">This</span> <span class="n">FORWARD_MODEL</span> <span class="n">will</span> <span class="n">execute</span> <span class="s2">&quot;MY_RELPERM_SCRIPT&quot;</span><span class="p">,</span> <span class="n">then</span>
<span class="o">--</span> <span class="s2">&quot;ECLIPSE100&quot;</span> <span class="ow">and</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">end</span> <span class="s2">&quot;MY_ROCK_PHYSICS_MODEL&quot;</span><span class="o">.</span>
<span class="n">FORWARD_MODEL</span> <span class="n">MY_RELPERM_SCRIPT</span> <span class="n">ECLIPSE100</span> <span class="n">MY_ROCK_PHYSICS_MODEL</span>
</pre></div>
</div>
<p>For advanced jobs you can pass string arguments to the job using a KEY=VALUE
based approach, this is further described in: passing arguments. In available
jobs in enkf you can see a list of the jobs which are available.</p>
</div>
<div class="topic" id="job-script">
<p class="topic-title first">JOB_SCRIPT</p>
<blockquote>
<div><p>Running the forward model from enkf is a multi-level process which can be
summarized as follows:</p>
<ol class="arabic simple">
<li>A Python module called jobs.py is written and stored in the directory where</li>
</ol>
</div></blockquote>
<p>the forward simulation is run. The jobs.py module contains a list of
job-elements, where each element is a Python representation of the code
entered when installing the job.</p>
<blockquote>
<div><ol class="arabic simple">
<li>The enkf application submits a Python script to the enkf queue system, this</li>
</ol>
</div></blockquote>
<p>script then loads the jobs.py module to find out which programs to run, and
how to run them.</p>
<blockquote>
<div><ol class="arabic simple">
<li>The job_script starts and monitors the individual jobs in the jobs.py</li>
</ol>
</div></blockquote>
<p>module.</p>
<blockquote>
<div>The JOB_SCRIPT variable should point at the Python script which is managing
the forward model. This should normally be set in the site wide configuration
file.</div></blockquote>
</div>
<div class="topic" id="queue-system">
<p class="topic-title first">QUEUE_SYSTEM</p>
<p>The keyword QUEUE_SYSTEM can be used to control where the simulation jobs are
executed. It can take the values LSF, TORQUE, RSH and LOCAL.</p>
<p>The LSF option will submit jobs to the LSF cluster at your location, and is
recommended whenever LSF is available.</p>
<p>The TORQUE option will submit jobs to the TORQUE a torque based system, using
the commands qsub, qstat etc., if available.</p>
<p>If you do not have access to LSF or TORQUE you can submit to your local
workstation using the LOCAL option and to homemade cluster of workstations
using the RSH option. All of the queue systems can be further configured, see
separate sections.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Tell</span> <span class="n">ert</span> <span class="n">to</span> <span class="n">use</span> <span class="n">the</span> <span class="n">LSF</span> <span class="n">cluster</span><span class="o">.</span>
<span class="n">QUEUE_SYSTEM</span> <span class="n">LSF</span>
</pre></div>
</div>
<p>The QUEUE_SYSTEM keyword is optional, and usually defaults to LSF (this is
site dependent).</p>
</div>
</div>
<div class="section" id="configuring-lsf-access">
<h2>Configuring LSF access<a class="headerlink" href="#configuring-lsf-access" title="Permalink to this headline">¶</a></h2>
<p id="id13">The LSF system is the most useful of the queue alternatives, and also the
alternative with most options. The most important options are related to how ert
should submit jobs to the LSF system. Essentially there are two methods ert can
use when submitting jobs to the LSF system:</p>
<ol class="arabic simple">
<li>For workstations which have direct access to LSF ert can submit directly with
no further configuration. This is preferred solution, but unfortunately not
very common.</li>
<li>Alternatively ert can issue shell commands to bsub/bjobs/bkill to submit
jobs. These shell commands can be issued on the current workstation, or
alternatively on a remote workstation using ssh.</li>
</ol>
<p>The main switch between alternatives 1 and 2 above is the LSF_SERVER option.</p>
<div class="topic" id="lsf-server">
<p class="topic-title first">LSF_SERVER</p>
<p>By using the LSF_SERVER option you essentially tell ert two things about how
jobs should be submitted to LSF:</p>
<ol class="arabic simple">
<li>You tell ert that jobs should be submitted using shell commands.</li>
<li>You tell ert which server should be used when submitting</li>
</ol>
<p>So when your configuration file has the setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LSF_SERVER</span>   <span class="n">be</span><span class="o">-</span><span class="n">grid01</span>
</pre></div>
</div>
<p>ert will use ssh to submit your jobs using shell commands on the server
be-grid01. For this to work you must have passwordless ssh to the server
be-grid01. If you give the special server name LOCAL ert will submit using
shell commands on the current workstation.</p>
<p><strong>bsub/bjobs/bkill options</strong></p>
<p>By default ert will use the shell commands bsub,bjobs and bkill to interact
with the queue system, i.e. whatever binaries are first in your PATH will be
used. For fine grained control of the shell based submission you can tell ert
which programs to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_OPTION</span>   <span class="n">LSF</span>  <span class="n">BJOBS_CMD</span>  <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">bjobs</span>
<span class="n">QUEUE_OPTION</span>   <span class="n">LSF</span>  <span class="n">BSUB_CMD</span>   <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">bsub</span>
</pre></div>
</div>
<p><em>Example 1</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LSF_SERVER</span>    <span class="n">be</span><span class="o">-</span><span class="n">grid01</span>
<span class="n">QUEUE_OPTION</span>  <span class="n">LSF</span>     <span class="n">BJOBS_CMD</span>   <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">bjobs</span>
<span class="n">QUEUE_OPTION</span>  <span class="n">LSF</span>     <span class="n">BSUB_CMD</span>    <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">bsub</span>
</pre></div>
</div>
<p>In this example we tell ert to submit jobs from the workstation be-grid01
using custom binaries for bsub and bjobs.</p>
<p><em>Example 2</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LSF_SERVER</span>   <span class="n">LOCAL</span>
</pre></div>
</div>
<p>In this example we will submit on the current workstation, without using ssh
first, and we will use the default bsub and bjobs executables. The remaining
LSF options apply irrespective of which method has been used to submit the
jobs.</p>
</div>
<div class="topic" id="lsf-queue">
<p class="topic-title first">LSF_QUEUE</p>
<p>The name of the LSF queue you are running ECLIPSE simulations in.</p>
</div>
</div>
<div class="section" id="configuring-torque-access">
<h2>Configuring TORQUE access<a class="headerlink" href="#configuring-torque-access" title="Permalink to this headline">¶</a></h2>
<p id="id14">The TORQUE system is the only available system on some clusters. The most
important options are related to how ert should submit jobs to the TORQUE
system.</p>
<ul class="simple">
<li>Currently, the TORQUE option only works when the machine you are logged into
have direct access to the queue system. ert then submit directly with no
further configuration.</li>
</ul>
<p>The most basic invocation is in other words:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_SYSTEM</span> <span class="n">TORQUE</span>
</pre></div>
</div>
<p><strong>qsub/qstat/qdel options</strong></p>
<p>By default ert will use the shell commands qsub,qstat and qdel to interact with
the queue system, i.e. whatever binaries are first in your PATH will be used.
For fine grained control of the shell based submission you can tell ert which
programs to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_SYSTEM</span> <span class="n">TORQUE</span>
<span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">QSUB_CMD</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">qsub</span>
<span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">QSTAT_CMD</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">qstat</span>
<span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">QDEL_CMD</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">qdel</span>
</pre></div>
</div>
<p>In this example we tell ert to submit jobs using custom binaries for bsub and
bjobs.</p>
<p><strong>Name of queue</strong></p>
<p>The name of the TORQUE queue you are running ECLIPSE simulations in.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">QUEUE</span> <span class="n">name_of_queue</span>
</pre></div>
</div>
<p><strong>Name of cluster (label)</strong></p>
<p>The name of the TORQUE cluster you are running ECLIPSE simulations in. This
might be a label (serveral clusters), or a single one, as in this example baloo.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">CLUSTER_LABEL</span> <span class="n">baloo</span>
</pre></div>
</div>
<p><strong>Max running jobs</strong></p>
<p>The queue option MAX_RUNNING controls the maximum number of simultaneous jobs
submitted to the queue when using (in this case) the TORQUE option in
QUEUE_SYSTEM.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_SYSTEM</span> <span class="n">TORQUE</span>
<span class="o">--</span> <span class="n">Submit</span> <span class="n">no</span> <span class="n">more</span> <span class="n">than</span> <span class="mi">30</span> <span class="n">simultaneous</span> <span class="n">jobs</span>
<span class="o">--</span> <span class="n">to</span> <span class="n">the</span> <span class="n">TORQUE</span> <span class="n">cluster</span><span class="o">.</span>
<span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">MAX_RUNNING</span> <span class="mi">30</span>
</pre></div>
</div>
<p><strong>Queue options controlling number of nodes and CPUs</strong></p>
<p>When using TORQUE, you must specify how many nodes a single job is should to
use, and how many CPUs per node. The default setup in ert will use one node and
one CPU. These options are called NUM_NODES and NUM_CPUS_PER_NODE.</p>
<p>If the numbers specified is higher than supported by the cluster (i.e. use 32
CPUs, but no node has more than 16), the job will not start.</p>
<p>If you wish to increase these number, the program running (typically ECLIPSE)
will usually also have to be told to correspondingly use more processing units
(keyword PARALLEL)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_SYSTEM</span> <span class="n">TORQUE</span>
<span class="o">--</span> <span class="n">Use</span> <span class="n">more</span> <span class="n">nodes</span> <span class="ow">and</span> <span class="n">CPUs</span>
<span class="o">--</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">TORQUE</span> <span class="n">cluster</span> <span class="n">per</span> <span class="n">job</span> <span class="n">submitted</span>
<span class="o">--</span> <span class="n">This</span> <span class="n">should</span> <span class="p">(</span><span class="ow">in</span> <span class="n">theory</span><span class="p">)</span> <span class="n">allow</span> <span class="k">for</span> <span class="mi">24</span> <span class="n">processing</span>
<span class="o">--</span> <span class="n">units</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="n">by</span> <span class="n">eg</span><span class="o">.</span> <span class="n">ECLIPSE</span>
<span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">NUM_NODES</span> <span class="mi">3</span>
<span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">NUM_CPUS_PER_NODE</span> <span class="mi">8</span>
</pre></div>
</div>
<p><strong>Keep output from qsub</strong></p>
<p>Sometimes the error messages from qsub can be useful, if something is seriously
wrong with the environment or setup. To keep this output (stored in your home
folder), use this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">KEEP_QSUB_OUTPUT</span> <span class="mi">1</span>
</pre></div>
</div>
<p>** Slow submit to torque **</p>
<p>To be more gentle with the torqueue system you can instruct the driver to sleep
for every submit request. The argument to the SUBMIT_SLEEP is the number of
seconds to sleep for every submit, can be a fraction like 0.5.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">SUBMIT_SLEEP</span> <span class="mf">0.25</span>
</pre></div>
</div>
<p>** Torque debug log **</p>
<p>You can ask the torqueu driver to store a debug log of the jobs submitted, and
the resulting job id. This is done with the queue option DEBUG_OUTPUT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">QUEUE_OPTION</span> <span class="n">TORQUE</span> <span class="n">DEBUG_OUTPUT</span> <span class="n">torque_log</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-the-rsh-queue">
<h2>Configuring the RSH queue<a class="headerlink" href="#configuring-the-rsh-queue" title="Permalink to this headline">¶</a></h2>
<div class="topic" id="rsh-host">
<span id="id15"></span><p class="topic-title first">RSH_HOST</p>
<p>You can run the forward model in enkf on workstations using remote-shell
commands. To use the RSH queue system you must first set a list of computers
which enkf can use for running jobs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RSH_HOST</span>   <span class="n">computer1</span><span class="p">:</span><span class="mi">2</span>  <span class="n">computer2</span><span class="p">:</span><span class="mi">2</span>   <span class="n">large_computer</span><span class="p">:</span><span class="mi">8</span>
</pre></div>
</div>
<p>Here you tell enkf that you can run on three different computers: computer1,
computer2 and large_computer. The two first computers can accept two jobs from
enkf, and the last can take eight jobs. Observe the following when using RSH:</p>
<p>You must have passwordless login to the computers listed in RSH_HOST otherwise
it will fail hard. enkf will not consider total load on the various computers;
if have said it can take two jobs, it will get two jobs, irrespective of the
existing load.</p>
</div>
<div class="topic" id="rsh-command">
<p class="topic-title first">RSH_COMMAND</p>
<p>This is the name of the executable used to invoke remote shell operations.
Will typically be either rsh or ssh. The command given to RSH_COMMAND must
either be in PATH or an absolute path.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MAX_RUNNING_RSH</span>
</pre></div>
</div>
<p>The keyword MAX_RUNNING_RSH controls the maximum number of simultaneous jobs
running when using the RSH option in QUEUE_SYSTEM. It MAX_RUNNING_RSH exceeds
the total capacity defined in RSH_HOST, it will automatically be truncated to
that capacity.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">No</span> <span class="n">more</span> <span class="n">than</span> <span class="mi">10</span> <span class="n">simultaneous</span> <span class="n">jobs</span>
<span class="o">--</span> <span class="n">running</span> <span class="n">via</span> <span class="n">RSH</span><span class="o">.</span>
<span class="n">MAX_RUNNING_RSH</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="keywords-related-to-plotting">
<h2>Keywords related to plotting<a class="headerlink" href="#keywords-related-to-plotting" title="Permalink to this headline">¶</a></h2>
<div class="topic" id="plot-driver">
<span id="id16"></span><p class="topic-title first">PLOT_DRIVER</p>
<p>This is the name of the sub system used for creating plots. The default system
is called ‘PLPLOT’ - all the other options regarding plotting are sub options
which are only relevant when you are using PLPLOT. In addition to PLPLOT you
can chose the value ‘TEXT’; this will actually not produce any plots, just
textfiles which can be used for plotting with your favorite plotting program.
This is particularly relevant if you have some special requirements to the
plots.</p>
</div>
<div class="topic" id="plot-errorbar">
<p class="topic-title first">PLOT_ERRORBAR</p>
<p>Should errorbars on the observations be plotted?</p>
</div>
<div class="topic" id="plot-errorbar-max">
<p class="topic-title first">PLOT_ERRORBAR_MAX</p>
<p>When plotting summary vectors for which observations have been ‘installed’
with the OBS_CONFIG keyword, ert will plot the observed values. If you have
less than PLOT_ERRORBAR_MAX observations ert will use errorbars to show the
observed values, otherwise it will use two dashed lines indicating +/- one
standard deviation. This option is only meaningful when PLOT_PLOT_ERRORBAR is
activated.</p>
<p>To ensure that you always get errorbars you can set PLOT_ERRORBAR_MAX to a
very large value, on the other hand setting PLOT_ERRORBAR_MAX to 0 will ensure
that ert always plots observation uncertainty using dashed lines of +/- one
standard deviation.</p>
<p>The setting here will also affect the output when you are using the TEXT
driver to plot.</p>
</div>
<div class="topic" id="plot-height">
<p class="topic-title first">PLOT_HEIGHT</p>
<p>When the PLPLOT driver creates a plot file, it will have the height (in
pixels) given by the PLOT_HEIGHT keyword. The default value for PLOT_HEIGHT is
768 pixels.</p>
</div>
<div class="topic" id="plot-refcase">
<p class="topic-title first">PLOT_REFCASE</p>
<p>Boolean variable which is TRUE if you want to add the refcases to the plots.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PLOT_REFCASE</span> <span class="n">TRUE</span>
</pre></div>
</div>
</div>
<div class="topic">
<p class="topic-title first">REFCASE_LIST</p>
<p>Provide one or more Eclipse .DATA files for a refcase to be added in the
plots. This refcase will be plotted in different colours. The summary files
related to the refcase should be in the same folder as the refcase.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REFCASE_LIST</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">refcase1</span><span class="o">/</span><span class="n">file1</span><span class="o">.</span><span class="n">DATA</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">refcase2</span><span class="o">/</span><span class="n">file2</span><span class="o">.</span><span class="n">DATA</span>
</pre></div>
</div>
</div>
<div class="topic" id="plot-settings">
<p class="topic-title first">PLOT_SETTINGS</p>
<p>The <code class="code docutils literal notranslate"><span class="pre">PLOT_SETTINGS</span></code> keyword is a “master keyword” which can be
used to configure some aspects of the plotting. These settings will
affect the default behaviour when you create a new plot, you can still
changes these settings interactively.</p>
<p>When using the <code class="code docutils literal notranslate"><span class="pre">PLOT_SETTINGS</span></code> keyword you supply a secondary
keyword and a values as the tow arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PLOT_SETTINGS</span> <span class="n">SHOW_REFCASE</span> <span class="kc">False</span>
</pre></div>
</div>
<p>Will make sure that your plots are created without the refcase plotted
as default. The available secondary keys are:</p>
<p>SHOW_REFCASE : Default True
SHOW_HISTORY : Default True</p>
</div>
<div class="topic" id="rft-config">
<p class="topic-title first">RFT_CONFIG</p>
<p>RFT_CONFIGS argument is a file with the name of the rfts followed by date (day
month year) Ex.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RFT_CONFIG</span>  <span class="o">../</span><span class="n">models</span><span class="o">/</span><span class="n">wells</span><span class="o">/</span><span class="n">rft</span><span class="o">/</span><span class="n">WELLNAME_AND_RFT_TIME</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Where the contents of the file is something like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">be</span><span class="o">-</span><span class="n">linapp16</span><span class="p">(</span><span class="n">inmyr</span><span class="p">)</span> <span class="o">-/</span><span class="n">models</span><span class="o">/</span><span class="n">wells</span><span class="o">/</span><span class="n">rft</span> <span class="mi">34</span><span class="o">&gt;</span> <span class="n">more</span> <span class="n">WELLNAME_AND_RFT_TIME</span><span class="o">.</span><span class="n">txt</span>
<span class="n">A</span><span class="o">-</span><span class="mi">1</span><span class="n">HP</span>  <span class="mi">06</span> <span class="mi">05</span> <span class="mi">1993</span>
<span class="n">A</span><span class="o">-</span><span class="mi">9</span><span class="n">HW</span>  <span class="mi">31</span> <span class="mi">07</span> <span class="mi">1993</span>
<span class="n">C</span><span class="o">-</span><span class="mi">1</span><span class="n">HP</span>  <span class="mi">11</span> <span class="mi">12</span> <span class="mi">2007</span>
<span class="n">C</span><span class="o">-</span><span class="mi">5</span><span class="n">HP</span>  <span class="mi">21</span> <span class="mi">12</span> <span class="mi">1999</span>
<span class="n">C</span><span class="o">-</span><span class="mi">6</span><span class="n">HR</span>  <span class="mi">09</span> <span class="mi">11</span> <span class="mi">1999</span>
<span class="n">D</span><span class="o">-</span><span class="mi">4</span><span class="n">HP</span>  <span class="mi">10</span> <span class="mi">07</span> <span class="mi">2003</span>
<span class="n">K</span><span class="o">-</span><span class="mi">3</span><span class="n">HW</span>  <span class="mi">09</span> <span class="mi">02</span> <span class="mi">2003</span>
<span class="n">K</span><span class="o">-</span><span class="mi">6</span><span class="n">HW</span>  <span class="mi">08</span> <span class="mi">11</span> <span class="mi">2002</span>
<span class="n">K</span><span class="o">-</span><span class="mi">7</span><span class="n">HW</span>  <span class="mi">21</span> <span class="mi">04</span> <span class="mi">2005</span>
<span class="n">D</span><span class="o">-</span><span class="mi">6</span><span class="n">HP</span>  <span class="mi">22</span> <span class="mi">04</span> <span class="mi">2006</span>
</pre></div>
</div>
</div>
<div class="topic" id="rftpath">
<p class="topic-title first">RFTPATH</p>
<p>RFTPATHs argument is the path to where the rft-files are located</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RFTPATH</span>  <span class="o">../</span><span class="n">models</span><span class="o">/</span><span class="n">wells</span><span class="o">/</span><span class="n">rft</span><span class="o">/</span>
</pre></div>
</div>
</div>
<p>With the keyword <code class="code docutils literal notranslate"><span class="pre">HOOK_WORKFLOW</span></code> you can configure workflow ‘hooks’;
meaning workflows which will be run automatically at certain points during ERTs
execution. Currently there are four points in ERTs flow of execution where you
can hook in a workflow, before the simulations start, <code class="code docutils literal notranslate"><span class="pre">PRE_SIMULATION</span></code>;
after all the simulations have completed <code class="code docutils literal notranslate"><span class="pre">POST_SIMULATION</span></code>; before the
update step, <code class="code docutils literal notranslate"><span class="pre">PRE_UPDATE</span></code> and after the update step, <code class="code docutils literal notranslate"><span class="pre">POST_UPDATE</span></code>.
The <code class="code docutils literal notranslate"><span class="pre">POST_SIMULATION</span></code> hook is typically used to trigger QC workflows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">HOOK_WORKFLOW</span> <span class="n">initWFLOW</span>        <span class="n">PRE_SIMULATION</span>
<span class="n">HOOK_WORKFLOW</span> <span class="n">preUpdateWFLOW</span>   <span class="n">PRE_UPDATE</span>
<span class="n">HOOK_WORKFLOW</span> <span class="n">postUpdateWFLOW</span>  <span class="n">POST_UPDATE</span>
<span class="n">HOOK_WORKFLOW</span> <span class="n">QC_WFLOW1</span>        <span class="n">POST_SIMULATION</span>
<span class="n">HOOK_WORKFLOW</span> <span class="n">QC_WFLOW2</span>        <span class="n">POST_SIMULATION</span>
</pre></div>
</div>
<p>In this example the workflow <code class="code docutils literal notranslate"><span class="pre">initWFLOW</span></code> will run after all the simulation
directories have been created, just before the forward model is submitted to the
queue. The workflow <code class="code docutils literal notranslate"><span class="pre">preUpdateWFLOW</span></code> will be run before the update step
and <code class="code docutils literal notranslate"><span class="pre">postUpdateWFLOW</span></code> will be run after the update step. When all the
simulations are complete the two workflows <code class="code docutils literal notranslate"><span class="pre">QC_WFLOW1</span></code> and
<code class="code docutils literal notranslate"><span class="pre">QC_WFLOW2</span></code> will be run.</p>
<p>Observe that the workflows being ‘hooked in’ with the <code class="code docutils literal notranslate"><span class="pre">HOOK_WORKFLOW</span></code> must
be loaded with the <code class="code docutils literal notranslate"><span class="pre">LOAD_WORKFLOW</span></code> keyword.</p>
<p>Currently, <code class="code docutils literal notranslate"><span class="pre">PRE_UPDATE</span></code> and <code class="code docutils literal notranslate"><span class="pre">POST_UPDATE</span></code> are only available from
python.</p>
</div>
<div class="section" id="manipulating-the-unix-environment">
<h2>Manipulating the Unix environment<a class="headerlink" href="#manipulating-the-unix-environment" title="Permalink to this headline">¶</a></h2>
<p id="id17">The two keywords SETENV and UPDATE_PATH can be used to manipulate the Unix
environment of the ERT process, tha manipulations only apply to the running ERT
instance, and are not applied to the shell.</p>
<div class="topic" id="setenv">
<p class="topic-title first">SETENV</p>
<p>You can use the SETENV keyword to alter the unix environment enkf is running
in. This is probably most relevant for setting up the environment for the
external jobs invoked by enkf.</p>
<p><em>Example:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">Setting</span> <span class="n">up</span> <span class="n">LSF</span>
<span class="n">SETENV</span>  <span class="n">LSF_BINDIR</span>      <span class="o">/</span><span class="n">prog</span><span class="o">/</span><span class="n">LSF</span><span class="o">/</span><span class="mf">7.0</span><span class="o">/</span><span class="n">linux2</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="n">glibc2</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="nb">bin</span>
<span class="n">SETENV</span>  <span class="n">LSF_LIBDIR</span>      <span class="o">/</span><span class="n">prog</span><span class="o">/</span><span class="n">LSF</span><span class="o">/</span><span class="mf">7.0</span><span class="o">/</span><span class="n">linux2</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="n">glibc2</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="n">lib</span>
<span class="n">SETENV</span>  <span class="n">LSF_UIDDIR</span>      <span class="o">/</span><span class="n">prog</span><span class="o">/</span><span class="n">LSF</span><span class="o">/</span><span class="mf">7.0</span><span class="o">/</span><span class="n">linux2</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="n">glibc2</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">uid</span>
<span class="n">SETENV</span>  <span class="n">LSF_SERVERDIR</span>   <span class="o">/</span><span class="n">prog</span><span class="o">/</span><span class="n">LSF</span><span class="o">/</span><span class="mf">7.0</span><span class="o">/</span><span class="n">linux2</span><span class="o">.</span><span class="mi">6</span><span class="o">-</span><span class="n">glibc2</span><span class="o">.</span><span class="mi">3</span><span class="o">-</span><span class="n">x86_64</span><span class="o">/</span><span class="n">etc</span>
<span class="n">SETENV</span>  <span class="n">LSF_ENVDIR</span>      <span class="o">/</span><span class="n">prog</span><span class="o">/</span><span class="n">LSF</span><span class="o">/</span><span class="n">conf</span>
</pre></div>
</div>
<p>Observe that the SETENV command is not as powerful as the corresponding shell
utility. In particular you can not use $VAR to refer to the existing value of
an environment variable. To add elements to the PATH variable it is easier to
use the UPDATE_PATH keyword.</p>
</div>
<div class="topic" id="update-path">
<p class="topic-title first">UPDATE_PATH</p>
<p>The UPDATE_PATH keyword will prepend a new element to an existing PATH
variable. I.e. the config</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE_PATH</span>   <span class="n">PATH</span>  <span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">funky</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="nb">bin</span>
</pre></div>
</div>
<p>will be equivalent to the shell command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>setenv PATH /some/funky/path/bin:$PATH
</pre></div>
</div>
<p>The whole thing is just a workaround because we can not use $PATH.</p>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">UPDATE_SETTINGS</span></code> keyword is a <em>super-keyword</em> which can be used to
control parameters which apply to the Ensemble Smoother update algorithm. The
:code:<a href="#id18"><span class="problematic" id="id19">`</span></a>UPDATE_SETTINGS`currently supports the two subkeywords:</p>
<blockquote>
<div><dl class="docutils">
<dt>OVERLAP_LIMIT Scaling factor used when detecting outliers. Increasing this</dt>
<dd><p class="first">factor means that more observations will potentially be included in the
assimilation. The default value is 3.00..</p>
<p>Including outliers in the Smoother algorithm can dramatically increase the
coupling between the ensemble members. It is therefore important to filter out
these outlier data prior to data assimilation. An observation, textstyle
d^o_i, will be classified as an outlier if</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">|</span><span class="n">d</span><span class="o">^</span><span class="n">o_i</span> <span class="o">-</span> \<span class="n">bar</span><span class="p">{</span><span class="n">d</span><span class="p">}</span><span class="n">_i</span><span class="o">|</span> <span class="o">&gt;</span> \<span class="n">mathrm</span><span class="p">{</span><span class="n">ENKF</span>\<span class="n">_ALPHA</span><span class="p">}</span> \<span class="n">left</span><span class="p">(</span><span class="n">s_</span><span class="p">{</span><span class="n">d_i</span><span class="p">}</span> <span class="o">+</span> \<span class="n">sigma_</span><span class="p">{</span><span class="n">d</span><span class="o">^</span><span class="n">o_i</span><span class="p">}</span>\<span class="n">right</span><span class="p">),</span>
</pre></div>
</div>
<p class="last">where textstyleboldsymbol{d}^o is the vector of observed data,
textstyleboldsymbol{bar{d}} is the average of the forcasted data ensemble,
textstyleboldsymbol{s_{d}} is the vector of estimated standard deviations
for the forcasted data ensemble, and textstyleboldsymbol{s_{d}^o} is the
vector standard deviations for the observation error (specified a priori).</p>
</dd>
<dt>STD_CUTOFF If the ensemble variation for one particular measurment is below</dt>
<dd>this limit the observation will be deactivated. he default value for
this cutoff is 1e-6.</dd>
</dl>
</div></blockquote>
<p>Observe that for the updates many settings should be applied on the analysis
module in question.</p>
<div class="topic" id="umask">
<p class="topic-title first">UMASK</p>
<p>The <cite>umask</cite> is a concept used by Linux to controll the permissions on
newly created files. By default the files created by ert will have the
default permissions of your account, but by using the keyword <cite>UMASK</cite>
you can alter the permissions of files created by ert.</p>
<p>To determine the initial permissions on newly created files start with
the initial permissions <cite>-rw-rw-rw-</cite> (octal 0666) for files and
<cite>-rwxrwxrwx</cite> (octal 0777) for directories, and then <em>~subtract</em> the
current umask setting. So if you wish the newly created files to have
permissions <cite>-rw-r—–</cite> you need to subtract write permissions for
group and read and write permissions for others - corresponding to
<cite>umask 0026</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UMASK</span> <span class="mi">0022</span>
</pre></div>
</div>
<p>We remove write permissions from group and others, implying that
everyone can read the files and directories created by ert, but only the
owner can write to them. Also everyone can execute the directories (i.e.
list the content).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UMASK</span> <span class="mi">0</span>
</pre></div>
</div>
<p>No permissions are removed, i.e. everyone can do everything with the
files and directories created by ert.</p>
<p>The umask setting in ert is passed on to the forward model, and should
apply to the files/directories created by the forward model also.
However - the executables in the forward model can in principle set it’s
own umask setting or alter permissions in another way - so there is no
guarantee that the umask setting will apply to all files created by the
forward model.</p>
<p>The octal permissions are based on three octal numbers for owner, group
and others, where each value is based on adding the constants:</p>
<blockquote>
<div>1: Execute permission
2: Write permission
4: Read permission</div></blockquote>
<p>So an octal permission of 0754 means:</p>
<blockquote>
<div><ul class="simple">
<li>Owner(7) can execute(1), write(2) and read(4).</li>
<li>Group(5) can execute(1) and read(4).</li>
<li>Others(2) can read(4)</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../changes/index.html" title="Release notes for ERT"
             >next</a> |</li>
        <li class="right" >
          <a href="../scripting/index.html" title="Use the ERT API to create custom functionality"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../manual.html">ERT 2.3 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright Equinor.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.
    </div>
  </body>
</html>